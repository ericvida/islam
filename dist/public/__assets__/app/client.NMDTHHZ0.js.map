{
  "version": 3,
  "sources": ["../node_modules/imba/vendor/events.js", "../node_modules/imba/src/imba/utils.imba", "../node_modules/imba/src/imba/scheduler.imba", "../node_modules/imba/src/imba/dom/flags.imba", "../node_modules/imba/src/imba/dom/core.web.imba", "../node_modules/imba/src/imba/dom/fragment.imba", "../node_modules/imba/src/imba/dom/component.imba", "../node_modules/imba/src/imba/dom/context.imba", "../node_modules/imba/src/imba/dom/mount.imba", "../node_modules/imba/src/imba/events/core.imba", "../node_modules/imba/src/imba/router/index.imba", "../node_modules/imba/src/imba/router/location.imba", "../node_modules/imba/src/imba/router/request.imba", "../node_modules/imba/src/imba/router/route.imba", "../node_modules/imba/src/imba/queue.imba", "client.imba"],
  "sourcesContent": ["// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar R = typeof Reflect === 'object' ? Reflect : null\nvar ReflectApply = R && typeof R.apply === 'function'\n  ? R.apply\n  : function ReflectApply(target, receiver, args) {\n    return Function.prototype.apply.call(target, receiver, args);\n  }\n\nvar ReflectOwnKeys\nif (R && typeof R.ownKeys === 'function') {\n  ReflectOwnKeys = R.ownKeys\n} else if (Object.getOwnPropertySymbols) {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target)\n      .concat(Object.getOwnPropertySymbols(target));\n  };\n} else {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target);\n  };\n}\n\nfunction ProcessEmitWarning(warning) {\n  if (console && console.warn) console.warn(warning);\n}\n\nvar NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {\n  return value !== value;\n}\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\nmodule.exports = EventEmitter;\nmodule.exports.once = once;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._eventsCount = 0;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nvar defaultMaxListeners = 10;\n\nfunction checkListener(listener) {\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n}\n\nObject.defineProperty(EventEmitter, 'defaultMaxListeners', {\n  enumerable: true,\n  get: function() {\n    return defaultMaxListeners;\n  },\n  set: function(arg) {\n    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {\n      throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received ' + arg + '.');\n    }\n    defaultMaxListeners = arg;\n  }\n});\n\nEventEmitter.init = function() {\n\n  if (this._events === undefined ||\n      this._events === Object.getPrototypeOf(this)._events) {\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n};\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {\n    throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received ' + n + '.');\n  }\n  this._maxListeners = n;\n  return this;\n};\n\nfunction _getMaxListeners(that) {\n  if (that._maxListeners === undefined)\n    return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return _getMaxListeners(this);\n};\n\nEventEmitter.prototype.emit = function emit(type) {\n  var args = [];\n  for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);\n  var doError = (type === 'error');\n\n  var events = this._events;\n  if (events !== undefined)\n    doError = (doError && events.error === undefined);\n  else if (!doError)\n    return false;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    var er;\n    if (args.length > 0)\n      er = args[0];\n    if (er instanceof Error) {\n      // Note: The comments on the `throw` lines are intentional, they show\n      // up in Node's output if this results in an unhandled exception.\n      throw er; // Unhandled 'error' event\n    }\n    // At least give some kind of context to the user\n    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));\n    err.context = er;\n    throw err; // Unhandled 'error' event\n  }\n\n  var handler = events[type];\n\n  if (handler === undefined)\n    return false;\n\n  if (typeof handler === 'function') {\n    ReflectApply(handler, this, args);\n  } else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      ReflectApply(listeners[i], this, args);\n  }\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n\n  checkListener(listener);\n\n  events = target._events;\n  if (events === undefined) {\n    events = target._events = Object.create(null);\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener !== undefined) {\n      target.emit('newListener', type,\n                  listener.listener ? listener.listener : listener);\n\n      // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n      events = target._events;\n    }\n    existing = events[type];\n  }\n\n  if (existing === undefined) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] =\n        prepend ? [listener, existing] : [existing, listener];\n      // If we've already got an array, just append.\n    } else if (prepend) {\n      existing.unshift(listener);\n    } else {\n      existing.push(listener);\n    }\n\n    // Check for listener leak\n    m = _getMaxListeners(target);\n    if (m > 0 && existing.length > m && !existing.warned) {\n      existing.warned = true;\n      // No error code for this since it is a Warning\n      // eslint-disable-next-line no-restricted-syntax\n      var w = new Error('Possible EventEmitter memory leak detected. ' +\n                          existing.length + ' ' + String(type) + ' listeners ' +\n                          'added. Use emitter.setMaxListeners() to ' +\n                          'increase limit');\n      w.name = 'MaxListenersExceededWarning';\n      w.emitter = target;\n      w.type = type;\n      w.count = existing.length;\n      ProcessEmitWarning(w);\n    }\n  }\n\n  return target;\n}\n\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener =\n    function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n\nfunction onceWrapper() {\n  if (!this.fired) {\n    this.target.removeListener(this.type, this.wrapFn);\n    this.fired = true;\n    if (arguments.length === 0)\n      return this.listener.call(this.target);\n    return this.listener.apply(this.target, arguments);\n  }\n}\n\nfunction _onceWrap(target, type, listener) {\n  var state = { fired: false, wrapFn: undefined, target: target, type: type, listener: listener };\n  var wrapped = onceWrapper.bind(state);\n  wrapped.listener = listener;\n  state.wrapFn = wrapped;\n  return wrapped;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  checkListener(listener);\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener =\n    function prependOnceListener(type, listener) {\n      checkListener(listener);\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n\n// Emits a 'removeListener' event if and only if the listener was removed.\nEventEmitter.prototype.removeListener =\n    function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n\n      checkListener(listener);\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      list = events[type];\n      if (list === undefined)\n        return this;\n\n      if (list === listener || list.listener === listener) {\n        if (--this._eventsCount === 0)\n          this._events = Object.create(null);\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit('removeListener', type, list.listener || listener);\n        }\n      } else if (typeof list !== 'function') {\n        position = -1;\n\n        for (i = list.length - 1; i >= 0; i--) {\n          if (list[i] === listener || list[i].listener === listener) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0)\n          return this;\n\n        if (position === 0)\n          list.shift();\n        else {\n          spliceOne(list, position);\n        }\n\n        if (list.length === 1)\n          events[type] = list[0];\n\n        if (events.removeListener !== undefined)\n          this.emit('removeListener', type, originalListener || listener);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\n\nEventEmitter.prototype.removeAllListeners =\n    function removeAllListeners(type) {\n      var listeners, events, i;\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      // not listening for removeListener, no need to emit\n      if (events.removeListener === undefined) {\n        if (arguments.length === 0) {\n          this._events = Object.create(null);\n          this._eventsCount = 0;\n        } else if (events[type] !== undefined) {\n          if (--this._eventsCount === 0)\n            this._events = Object.create(null);\n          else\n            delete events[type];\n        }\n        return this;\n      }\n\n      // emit removeListener for all listeners on all events\n      if (arguments.length === 0) {\n        var keys = Object.keys(events);\n        var key;\n        for (i = 0; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === 'removeListener') continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners('removeListener');\n        this._events = Object.create(null);\n        this._eventsCount = 0;\n        return this;\n      }\n\n      listeners = events[type];\n\n      if (typeof listeners === 'function') {\n        this.removeListener(type, listeners);\n      } else if (listeners !== undefined) {\n        // LIFO order\n        for (i = listeners.length - 1; i >= 0; i--) {\n          this.removeListener(type, listeners[i]);\n        }\n      }\n\n      return this;\n    };\n\nfunction _listeners(target, type, unwrap) {\n  var events = target._events;\n\n  if (events === undefined)\n    return [];\n\n  var evlistener = events[type];\n  if (evlistener === undefined)\n    return [];\n\n  if (typeof evlistener === 'function')\n    return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n\n  return unwrap ?\n    unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n}\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  return _listeners(this, type, true);\n};\n\nEventEmitter.prototype.rawListeners = function rawListeners(type) {\n  return _listeners(this, type, false);\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events !== undefined) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener !== undefined) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];\n};\n\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n  for (var i = 0; i < n; ++i)\n    copy[i] = arr[i];\n  return copy;\n}\n\nfunction spliceOne(list, index) {\n  for (; index + 1 < list.length; index++)\n    list[index] = list[index + 1];\n  list.pop();\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n  return ret;\n}\n\nfunction once(emitter, name) {\n  return new Promise(function (resolve, reject) {\n    function eventListener() {\n      if (errorListener !== undefined) {\n        emitter.removeListener('error', errorListener);\n      }\n      resolve([].slice.call(arguments));\n    };\n    var errorListener;\n\n    // Adding an error listener is not optional because\n    // if an error is thrown on an event emitter we cannot\n    // guarantee that the actual event we are waiting will\n    // be fired. The result could be a silent way to create\n    // memory or file descriptor leaks, which is something\n    // we should avoid.\n    if (name !== 'error') {\n      errorListener = function errorListener(err) {\n        emitter.removeListener(name, eventListener);\n        reject(err);\n      };\n\n      emitter.once('error', errorListener);\n    }\n\n    emitter.once(name, eventListener);\n  });\n}", "const dashRegex = /-./g\n\nexport class LazyProxy\n\tstatic def for getter\n\t\tnew Proxy({}, new self(getter))\n\n\tdef constructor getter\n\t\tgetter = getter\n\t\n\tget target\n\t\tgetter!\n\n\tdef get _, key\n\t\ttarget[key]\n\t\n\tdef set _, key, value\n\t\ttarget[key] = value\n\t\treturn true\n\nexport def proxy getter, placeholder = {}\n\tnew Proxy(placeholder, new LazyProxy(getter))\n\nexport def parseTime value\n\tlet typ = typeof value\n\tif typ == 'number'\n\t\treturn value\n\n\tif typ == 'string'\n\t\tif (/^\\d+fps$/).test(value)\n\t\t\treturn 1000 / parseFloat(value)\n\t\telif (/^([-+]?[\\d\\.]+)s$/).test(value)\n\t\t\treturn parseFloat(value) * 1000\n\t\telif (/^([-+]?[\\d\\.]+)ms$/).test(value)\n\t\t\treturn parseFloat(value)\n\t# throw or return NaN?\n\treturn null\n\t\n\nexport def serializeData data\n\tlet map = new Map\n\tlet arr = []\n\tlet logging = no\n\tlet replacer = do(key,value)\n\t\tif value and value.#type and key !== ''\n\t\t\tlet ref = map.get(value) # value[sym] ||= \"$${nr++}$$\"\n\t\t\tunless map.has(value)\n\t\t\t\tmap.set(value,ref = \"$${arr.length}$$\")\n\t\t\t\tarr.push(value)\n\t\t\treturn key == null ? value : ref\n\t\tvalue\n\n\tlet json = JSON.stringify(data,replacer,2)\n\tlet i = 0\n\tlogging = yes\n\twhile i < arr.length\n\t\tarr[i] = JSON.stringify(arr[i],replacer,2)\n\t\ti++\n\n\tlet inject = \"\"\n\tfor item,i in arr\n\t\tinject += \"\\\"$${i}$$\\\":{item},\\n\"\n\tjson = '{' + inject + json.slice(1)\n\treturn json\n\t\n\nexport def deserializeData data, reviver = null\n\tlet objects = {}\n\tlet reg = /\\$\\$\\d+\\$\\$/\n\tlet lookup = do(value)\n\t\treturn objects[value] ||= reviver ? reviver(value) : {}\n\n\tlet parser = do(key,value)\n\t\tif typeof value == 'string'\n\t\t\tif value[0] == '$' and reg.test(value)\n\t\t\t\treturn lookup(value)\n\t\telif typeof key == 'string' and key[0] == '$' and reg.test(key)\n\t\t\tlet obj = lookup(key)\n\t\t\tObject.assign(obj,value)\n\t\t\treturn obj\n\n\t\treturn value\n\n\tlet parsed = JSON.parse(data,parser)\n\treturn parsed\n\nexport def patchManifest prev, curr\n\tlet origs = {}\n\tlet diff = {\n\t\tadded: []\n\t\tchanged: []\n\t\tremoved: []\n\t\tall: []\n\t\turls: {}\n\t}\n\n\tif prev.assets\n\t\tfor item in prev.assets\n\t\t\tlet ref = item.originalPath or item.path\n\t\t\torigs[ref] = item\n\t\t\tif item.url\n\t\t\t\t# add old urls to the new manifest\n\t\t\t\tcurr.urls[item.url] ||= item\n\t\n\tfor item in (curr.assets or [])\n\t\tlet ref = item.originalPath or item.path\n\t\tlet orig = origs[ref]\n\n\t\tif item.url and prev.urls\n\t\t\tprev.urls[item.url] = item\n\n\t\tif orig\n\t\t\tif orig.hash != item.hash\n\t\t\t\torig.invalidated = Date.now!\n\t\t\t\torig.replacedBy = item\n\t\t\t\titem.replaces = orig\n\t\t\t\tdiff.changed.push(item)\n\t\t\t\tdiff.all.push(item)\n\n\t\t\t\tif orig == prev.main\n\t\t\t\t\tdiff.main = item\n\n\t\t\tdelete origs[ref]\n\t\telse\n\t\t\tdiff.added.push(item)\n\t\t\tdiff.all.push(item)\n\n\t# these are the items that are no longer referencd\n\tfor own path,item of origs\n\t\titem.removed = Date.now!\n\t\tdiff.all.push(item)\n\n\tfor item in diff.all\n\t\tlet typ = diff[item.type] ||= []\n\t\ttyp.push(item)\n\n\tdiff.removed = Object.values(origs)\n\tcurr.changes = diff\n\treturn curr\n\nexport def toCamelCase str\n\tif str.indexOf('-') >= 0\n\t\tstr.replace(dashRegex) do $1.charAt(1).toUpperCase!\n\telse\n\t\tstr\n\n\n# Basic events - move to separate file?\nconst emit__ = do(event, args, node)\n\tlet prev\n\tlet cb\n\tlet ret\n\n\twhile (prev = node) and (node = node.next)\n\t\tif cb = node.listener\n\t\t\tif node.path and cb[node.path]\n\t\t\t\tret = args ? cb[node.path].apply(cb,args) : cb[node.path]()\n\t\t\telse\n\t\t\t\t# check if it is a method?\n\t\t\t\tret = args ? cb.apply(node, args) : cb.call(node)\n\n\t\tif node.times && --node.times <= 0\n\t\t\tprev.next = node.next\n\t\t\tnode.listener = null\n\treturn\n\n# method for registering a listener on object\nexport def listen obj, event, listener, path\n\tlet cbs\n\tlet list\n\tlet tail\n\tcbs = obj.#__listeners__ ||= {}\n\tlist = cbs[event] ||= {}\n\ttail = list.tail || (list.tail = (list.next = {}))\n\ttail.listener = listener\n\ttail.path = path\n\tlist.tail = tail.next = {}\n\treturn tail\n\n# register a listener once\nexport def once obj, event, listener\n\tlet tail = listen(obj,event,listener)\n\ttail.times = 1\n\treturn tail\n\n# remove a listener\nexport def unlisten obj, event, cb, meth\n\tlet node\n\tlet prev\n\tlet meta = obj.#__listeners__\n\treturn unless meta\n\n\tif node = meta[event]\n\t\twhile (prev = node) and (node = node.next)\n\t\t\tif node == cb || node.listener == cb\n\t\t\t\tprev.next = node.next\n\t\t\t\t# check for correct path as well?\n\t\t\t\tnode.listener = null\n\t\t\t\tbreak\n\treturn\n\n# emit event\nexport def emit obj, event, params\n\tif let cb = obj.#__listeners__\n\t\temit__(event,params,cb[event]) if cb[event]\n\t\temit__(event,[event,params],cb.all) if cb.all\n\treturn", "# imba$imbaPath=global\nlet rAF = global.requestAnimationFrame || (do(blk) setTimeout(blk,1000 / 60))\nlet FPS = 60\nlet SPF = 1 / 60\n\t\t\n# Scheduler\nclass Scheduled\n\towner = null\n\ttarget = null\n\tactive = no\n\tvalue = undefined\n\tskip = 0\n\tlast = 0\n\n\tdef tick scheduler\n\t\tlast = owner.#frames\n\t\ttarget.tick(owner)\n\t\t1\n\n\tdef update o, activate?\n\t\tlet on = active\n\t\tlet val = o.value\n\t\tlet changed = value != val\n\n\t\tif changed\n\t\t\tdeactivate!\n\t\t\tvalue = val\n\n\t\tif value or on or activate?\n\t\t\tactivate!\n\t\tself\n\n\tdef queue\n\t\towner.add(self)\n\t\treturn\n\n\tdef activate\n\t\tif value === yes\n\t\t\towner.on('commit',self)\n\t\telif value === no\n\t\t\tyes\n\t\telif typeof value == 'number'\n\t\t\t# duration\n\t\t\tlet tock = value / (1000 / 60)\n\t\t\tif tock <= 2 \n\t\t\t\towner.on('raf',self)\n\t\t\telse\n\t\t\t\t#interval = global.setInterval(queue.bind(self),value)\n\n\t\tactive = yes\n\t\tself\n\n\tdef deactivate\n\t\tif value === yes\n\t\t\towner.un('commit',self)\n\t\towner.un('raf',self)\n\n\t\tif #interval\n\t\t\tglobal.clearInterval(#interval)\n\t\t\t#interval = null\n\n\t\tactive = no\n\t\tself\n\nexport class Scheduler\n\tdef constructor\n\t\tid = Symbol!\n\t\tself.queue = []\n\t\tself.stage = -1\n\t\t#stage = -1\n\t\t#frames = 0\n\t\t#scheduled = no\n\t\t\n\t\tself.listeners = {}\n\t\tself.intervals = {}\n\t\tself.commit = do\n\t\t\tadd('commit')\n\t\t\treturn self\n\n\t\t#fps = 0\n\n\t\t$promise = null\n\t\t$resolve = null\n\t\t#ticker = do(e)\n\t\t\t#scheduled = no\n\t\t\tself.tick(e)\n\t\tself\n\n\tdef add item, force\n\t\tif force or self.queue.indexOf(item) == -1\n\t\t\tself.queue.push(item)\n\n\t\t#schedule! unless #scheduled\n\t\treturn self\n\n\tdef listen ns, item\n\t\tlet set = listeners[ns]\n\t\tlet first = !set\n\t\tset ||= listeners[ns] = new Set\n\t\tset.add(item)\n\n\t\tadd('raf') if ns == 'raf' and first\n\t\tself\t\n\n\tdef unlisten ns, item\n\t\tlet set = listeners[ns]\n\t\tset && set.delete(item)\n\t\tif ns == 'raf' and set and set.size == 0\n\t\t\tdelete listeners.raf\n\t\tself\n\n\tdef on ns,item\n\t\tlisten(ns,item)\n\n\tdef un ns,item\n\t\tunlisten(ns,item)\n\n\tget promise\n\t\t$promise ||= new Promise do(resolve)\n\t\t\t$resolve = resolve\n\n\tdef tick timestamp\n\t\tlet items = self.queue\n\t\tlet frame = #frames++\n\t\tself.ts = timestamp unless self.ts\n\t\tself.dt = timestamp - self.ts\n\t\tself.ts = timestamp\n\t\tself.queue = []\n\t\t#stage = 1\n\n\t\t# calculate frames elapsed since last tick etc?\n\n\t\tif items.length\n\t\t\tfor item,i in items\n\t\t\t\tif typeof item === 'string' && listeners[item]\n\t\t\t\t\tlisteners[item].forEach do |item|\n\t\t\t\t\t\tif item.tick isa Function\n\t\t\t\t\t\t\titem.tick(self)\n\t\t\t\t\t\telif item isa Function\n\t\t\t\t\t\t\titem(self)\n\t\t\t\telif item isa Function\n\t\t\t\t\titem(self.dt,self)\n\t\t\t\telif item.tick\n\t\t\t\t\titem.tick(self.dt,self)\n\n\t\t#stage = #scheduled ? 0 : -1\n\n\t\tif $promise\n\t\t\t$resolve(self)\n\t\t\t$promise = $resolve = null\n\n\t\tif listeners.raf and true\n\t\t\tadd('raf')\n\t\tself\n\n\tdef #schedule\n\t\tif !#scheduled\n\t\t\t#scheduled = yes\n\t\t\t#stage = 0 if #stage == -1\n\t\t\trAF(#ticker)\n\t\tself\n\n\tdef schedule item, o\n\t\to ||= (item[id] ||= {value: yes})\n\t\tlet state = o[id] ||= new Scheduled(owner: self, target: item)\n\t\tstate.update(o,yes)\n\n\tdef unschedule item, o = {}\n\t\to ||= item[id]\n\t\tlet state = o and o[id]\n\t\tif state and state.active\n\t\t\tstate.deactivate!\n\t\tself\n\nexport const scheduler = new Scheduler \n\nexport def commit\n\tscheduler.add('commit').promise\n\nexport def setTimeout fn,ms\n\tglobal.setTimeout(&,ms) do\n\t\tfn!\n\t\tcommit!\n\t\treturn\n\nexport def setInterval fn,ms\n\tglobal.setInterval(&,ms) do\n\t\tfn!\n\t\tcommit!\n\t\treturn\n\nexport const clearInterval = global.clearInterval\nexport const clearTimeout = global.clearTimeout", "export class Flags\n\n\tdef constructor dom\n\t\tdom = dom\n\t\tstring = \"\"\n\n\tdef contains ref\n\t\treturn dom.classList.contains(ref)\n\n\tdef add ref\n\t\treturn self if contains(ref)\n\t\tstring += (string ? ' ' : '') + ref\n\t\tdom.classList.add(ref)\n\t\t# sync!\n\t\treturn self\n\n\tdef remove ref\n\t\treturn self unless contains(ref)\n\t\tvar regex = new RegExp('(^|\\\\s)*' + ref + '(\\\\s|$)*', 'g')\n\t\tstring = string.replace(regex, '')\n\t\tdom.classList.remove(ref)\n\t\t# sync!\n\t\treturn self\n\n\tdef toggle ref, bool\n\t\tbool = !contains(ref) if bool === undefined\n\t\tbool ? add(ref) : remove(ref)\n\t\t\n\tdef incr ref\n\t\tlet m = stacks ||= {}\n\t\tlet c = m[ref] or 0\n\t\tadd(ref) if c < 1\n\t\treturn m[ref] = Math.max(c,0) + 1\n\t\n\tdef decr ref\n\t\tlet m = stacks ||= {}\n\t\tlet c = m[ref] or 0\n\t\tremove(ref) if c == 1\n\t\treturn m[ref] = Math.max(c,1) - 1\n\n\tdef valueOf\n\t\tstring\n\n\tdef toString\n\t\tstring\n\n\tdef sync\n\t\tdom.flagSync$!", "import {Flags} from './flags'\n\nexport const {\n\tEvent,\n\tUIEvent,\n\tMouseEvent,\n\tPointerEvent,\n\tKeyboardEvent,\n\tCustomEvent,\n\tNode,\n\tComment,\n\tText,\n\tElement,\n\tHTMLElement,\n\tHTMLHtmlElement,\n\tHTMLSelectElement,\n\tHTMLInputElement,\n\tHTMLTextAreaElement,\n\tHTMLButtonElement,\n\tHTMLOptionElement,\n\tHTMLScriptElement,\n\tSVGElement,\n\tDocumentFragment,\n\tShadowRoot,\n\tDocument,\n\tWindow,\n\tcustomElements\n} = global.window\n\n# export const document = global.window.document\nconst CustomTagConstructors = {}\nconst CustomTagToElementNames = {}\nexport const TYPES = {}\nexport const CUSTOM_TYPES = {}\nexport def get_document\n\tglobal.document\n\nexport def use_window\n\tyes\n\n\n\n# Basic node extensions\n\nconst contextHandler =\n\tdef get target, name\n\t\tlet ctx = target\n\t\tlet val = undefined\n\t\twhile ctx and val == undefined\n\t\t\tif ctx = ctx.#parent\n\t\t\t\tval = ctx[name]\n\t\treturn val\n\nextend class Document\n\tget flags\n\t\tself.documentElement.flags\n\nextend class Node\n\tget #parent\n\t\t##parent or this.parentNode or ##up # FIX\n\n\tget #context\n\t\t##context ||= new Proxy(self,contextHandler)\n\n\tdef #init\n\t\tself\n\n\t# replace this with something else\n\tdef replaceWith$ other\n\t\tif !(other isa Node) and other.replace$\n\t\t\tother.replace$(this)\n\t\telse\n\t\t\tself.parentNode.replaceChild(other,this)\n\t\treturn other\n\n\tdef insertInto$ parent\n\t\tparent.appendChild$(this)\n\t\treturn this\n\n\tdef insertBefore$ el, prev\n\t\tthis.insertBefore(el,prev)\n\n\tdef insertBeforeBegin$ other\n\t\tself.parentNode.insertBefore(other,this)\n\n\tdef insertAfterEnd$ other\n\t\tif self.nextSibling\n\t\t\tself.nextSibling.insertBeforeBegin$(other)\n\t\telse\n\t\t\tself.parentNode.appendChild(other)\n\t\n\tdef insertAfterBegin$ other\n\t\tif self.childNodes[0]\n\t\t\tself.childNodes[0].insertBeforeBegin$(other)\n\t\telse\n\t\t\tself.appendChild(other)\n\n\tget #placeholder__\n\t\t##placeholder__ ||= global.document.createComment(\"\")\n\n\tset #placeholder__ value\n\t\tlet prev = ##placeholder__\n\t\t##placeholder__ = value\n\t\tif prev and prev != value and prev.parentNode\n\t\t\tprev.replaceWith$(value)\n\n\tdef #attachToParent\n\t\tlet ph = #placeholder__\n\t\tif ph.parentNode and ph != self\n\t\t\tph.replaceWith$(self)\n\t\tself\n\n\tdef #detachFromParent route\n\t\tlet ph = #placeholder__\n\t\tif parentNode and ph != self\n\t\t\tself.replaceWith$(ph)\n\t\t\t# TODO add detached flag?\n\t\tself\n\n# Basic element extensions\nextend class Element\n\t\n\tdef log ...params\n\t\tconsole.log(...params)\n\t\tself\n\n\tdef emit name, detail, o = {bubbles: true, cancelable: true}\n\t\to.detail = detail if detail != undefined\n\t\tlet event = new CustomEvent(name, o)\n\t\tlet res = self.dispatchEvent(event)\n\t\treturn event\n\n\tdef slot$ name, ctx\n\t\treturn self\n\n\t# inline in files or remove all together?\n\tdef text$ item\n\t\tself.textContent = item\n\t\tself\n\n\tdef insert$ item, f, prev\n\t\tlet type = typeof item\n\n\t\tif type === 'undefined' or item === null\n\t\t\t# what if the prev value was the same?\n\t\t\tif prev and prev isa Comment # check perf\n\t\t\t\treturn prev\n\n\t\t\tlet el = document.createComment('')\n\t\t\tprev ? prev.replaceWith$(el) : el.insertInto$(this)\n\t\t\treturn el\n\n\t\t# dont reinsert again\n\t\tif item === prev\n\t\t\treturn item\n\n\t\t# what if this is null or undefined -- add comment and return? Or blank text node?\n\t\telif type !== 'object'\n\t\t\tlet res\n\t\t\tlet txt = item\n\t\t\t\n\t\t\tif (f & $TAG_FIRST_CHILD$) && (f & $TAG_LAST_CHILD$)\n\t\t\t\t# FIXME what if the previous one was not text? Possibly dangerous\n\t\t\t\t# when we set this on a fragment - it essentially replaces the whole\n\t\t\t\t# fragment?\n\t\t\t\tself.textContent = txt\n\t\t\t\treturn\n\n\t\t\tif prev\n\t\t\t\tif prev isa Text # check perf\n\t\t\t\t\tprev.textContent = txt\n\t\t\t\t\treturn prev\n\t\t\t\telse\n\t\t\t\t\tres = document.createTextNode(txt)\n\t\t\t\t\tprev.replaceWith$(res,self)\n\t\t\t\t\treturn res\n\t\t\telse\n\t\t\t\tself.appendChild$(res = document.createTextNode(txt))\n\t\t\t\treturn res\t\n\n\t\telse\n\t\t\tprev ? prev.replaceWith$(item,self) : item.insertInto$(self)\n\t\t\treturn item\n\t\treturn\n\n\tdef open$\n\t\tself\n\n\tdef close$\n\t\tself\n\n\tdef end$\n\t\tself.render() if self.render\n\t\treturn\n\n\tget flags\n\t\tunless $flags\n\t\t\t# unless deopted - we want to first cache the extflags\n\t\t\t$flags = new Flags(self)\n\t\t\tif flag$ == Element.prototype.flag$\n\t\t\t\tflags$ext = self.className\n\t\t\tflagDeopt$()\n\t\treturn $flags\n\n\tdef flag$ str\n\t\t# Potentially slow\n\t\tlet ns = flags$ns\n\t\tself.className = ns ? (ns + (flags$ext = str)) : (flags$ext = str)\n\t\treturn\n\t\t\n\tdef flagDeopt$\n\t\tself.flag$ = self.flagExt$ # do(str) self.flagSync$(flags$ext = str)\n\t\tself.flagSelf$ = do(str) self.flagSync$(flags$own = str)\n\t\treturn\n\t\t\n\tdef flagExt$ str\n\t\tself.flagSync$(flags$ext = str)\n\n\tdef flagSelf$ str\n\t\t# if a tag receives flags from inside <self> we need to\n\t\t# redefine the flag-methods to later use both\n\t\tflagDeopt$()\n\t\treturn flagSelf$(str)\n\n\tdef flagSync$\n\t\tself.className = ((flags$ns or '') + (flags$ext or '') + ' ' + (flags$own || '') + ' ' + ($flags or ''))\n\n\nElement.prototype.appendChild$  = Element.prototype.appendChild\nElement.prototype.removeChild$  = Element.prototype.removeChild\nElement.prototype.insertBefore$ = Element.prototype.insertBefore\nElement.prototype.replaceChild$ = Element.prototype.replaceChild\nElement.prototype.set$ = Element.prototype.setAttribute\nElement.prototype.setns$ = Element.prototype.setAttributeNS\n\nexport def createElement name, parent, flags, text\n\tlet el = document.createElement(name)\n\t\t\n\tel.className = flags if flags\n\n\tif text !== null\n\t\tel.text$(text)\n\n\tif parent and parent isa Node\n\t\tel.insertInto$(parent)\n\n\treturn el\n\n\nconst descriptorCache = {}\ndef getDescriptor item,key,cache\n\tif !item\n\t\treturn cache[key] = null\n\n\tif cache[key] !== undefined\n\t\treturn cache[key]\n\t\n\tlet desc = Object.getOwnPropertyDescriptor(item,key)\n\n\tif desc !== undefined or item == SVGElement\n\t\treturn cache[key] = desc or null\n\n\tgetDescriptor(Reflect.getPrototypeOf(item),key,cache)\n\nextend class SVGElement\n\n\tdef set$ key,value\n\t\tlet cache = descriptorCache[nodeName] ||= {}\n\t\tlet desc = getDescriptor(this,key,cache)\n\n\t\tif !desc or !desc.set\n\t\t\tsetAttribute(key,value)\n\t\telse\n\t\t\tself[key] = value\n\t\treturn\n\n\tdef flag$ str\n\t\tlet ns = flags$ns\n\t\tself.className.baseVal = ns ? (ns + (flags$ext = str)) : (flags$ext = str)\n\t\treturn\n\n\tdef flagSelf$ str\n\t\t# if a tag receives flags from inside <self> we need to\n\t\t# redefine the flag-methods to later use both\n\t\tself.flag$ = do(str) self.flagSync$(flags$ext = str)\n\t\tself.flagSelf$ = do(str) self.flagSync$(flags$own = str)\n\t\treturn flagSelf$(str)\n\n\tdef flagSync$\n\t\tself.className.baseVal = ((flags$ns or '') + (flags$ext or '') + ' ' + (flags$own || '') + ' ' + ($flags or ''))\n\n\nextend class SVGSVGElement\n\n\tset src value\n\t\tif #src =? value\n\t\t\tif value..adoptNode\n\t\t\t\tvalue.adoptNode(self)\n\t\t\telif value..content\n\t\t\t\tfor own k,v of value.attributes\n\t\t\t\t\tsetAttribute(k,v)\n\t\t\t\tinnerHTML = value.content\n\t\treturn\n\n\t\t\n\nexport def createSVGElement name, parent, flags, text, ctx\n\tlet el = document.createElementNS(\"http://www.w3.org/2000/svg\",name)\n\n\tif flags\n\t\tel.className.baseVal = flags\n\n\tif parent and parent isa Node\n\t\tel.insertInto$(parent)\n\treturn el\n\nexport def createComment text\n\tdocument.createComment(text)\n\nexport def createFragment\n\tdocument.createDocumentFragment!\n\n\n\nconst vendor = global.navigator..vendor or ''\nconst ua = global.navigator..userAgent or ''\n\nconst isSafari = vendor.indexOf('Apple') > -1 || ua.indexOf('CriOS') >= 0 || ua.indexOf('FxiOS') >= 0\nconst supportsCustomizedBuiltInElements = !isSafari\nconst CustomDescriptorCache = new Map\n\nclass CustomHook < HTMLElement\n\tdef connectedCallback\n\t\tif supportsCustomizedBuiltInElements\n\t\t\tparentNode.removeChild(self)\n\t\telse\n\t\t\tparentNode.connectedCallback!\n\n\tdef disconnectedCallback\n\t\tif !supportsCustomizedBuiltInElements\n\t\t\tparentNode.disconnectedCallback!\n\nwindow.customElements.define('i-hook',CustomHook)\n\ndef getCustomDescriptors el, klass\n\tlet props = CustomDescriptorCache.get(klass)\n\n\tunless props\n\t\tprops = {}\n\t\tlet proto = klass.prototype\n\t\tlet protos = [proto]\n\t\twhile proto = (proto and Object.getPrototypeOf(proto))\n\t\t\tbreak if proto.constructor == el.constructor\n\t\t\tprotos.unshift(proto)\n\n\t\tfor item in protos\n\t\t\tlet desc = Object.getOwnPropertyDescriptors(item)\n\t\t\tObject.assign(props,desc)\n\t\tCustomDescriptorCache.set(klass,props)\n\n\treturn props\n\n# Registry\nexport def createComponent name, parent, flags, text, ctx\n\t# the component could have a different web-components name?\n\tlet el\n\t\n\tif typeof name != 'string'\n\t\tif name and name.nodeName\n\t\t\tname = name.nodeName\n\n\tlet cmpname = CustomTagToElementNames[name] or name\n\n\tif CustomTagConstructors[name]\n\t\tlet cls = CustomTagConstructors[name]\n\t\tlet typ = cls.prototype.#htmlNodeName\n\t\tif typ and supportsCustomizedBuiltInElements\n\t\t\tel = document.createElement(typ,is: name)\n\t\telif cls.create$ and typ\n\t\t\tel = document.createElement(typ)\n\t\t\tel.setAttribute('is',cmpname)\n\t\t\tlet props = getCustomDescriptors(el,cls)\n\t\t\tObject.defineProperties(el,props)\n\t\t\tel.__slots = {}\n\t\t\t# check if we need a hook though?\n\t\t\tel.appendChild(document.createElement('i-hook'))\n\t\telif cls.create$\n\t\t\tel = cls.create$(el)\n\t\t\tel.__slots = {}\n\t\telse\n\t\t\tconsole.warn \"could not create tag {name}\"\n\telse\n\t\tel = document.createElement(CustomTagToElementNames[name] or name)\n\n\tel.##parent = parent\n\tel.#init!\n\n\tif text !== null\n\t\tel.slot$('__').text$(text)\n\t\t\n\tif flags or el.flags$ns # or nsflag\n\t\tel.flag$(flags or '')\n\treturn el\n\nexport def getTagType name, klass\n\t# TODO follow same structure as ssr TYPES\n\tif TYPES[name]\n\t\treturn TYPES[name]\n\n\tif window[klass]\n\t\treturn window[klass]\n\n\tif window[name]\n\t\treturn window[name]\n\nexport def getSuperTagType name, klass, cmp\n\tlet typ = getTagType(name,klass)\n\tlet custom = typ == cmp or typ.prototype isa cmp or typ.prototype.#htmlNodeName\n\n\tif !custom\n\t\tlet cls = typ.prototype.#ImbaElement\n\n\t\tif !cls\n\t\t\tcls = class CustomBuiltInElement < typ\n\t\t\t\tdef constructor\n\t\t\t\t\tsuper\n\t\t\t\t\t__slots = {}\n\t\t\t\t\t__F = 0\n\n\t\t\ttyp.prototype.#ImbaElement = cls\n\t\t\tlet descriptors = Object.getOwnPropertyDescriptors(cmp.prototype)\n\t\t\tObject.defineProperties(cls.prototype,descriptors)\n\t\t\tcls.prototype.#htmlNodeName = name\n\n\t\treturn cls\n\n\treturn typ\n\nexport def defineTag name, klass, options = {}\n\tTYPES[name] = CUSTOM_TYPES[name] = klass\n\n\tklass.nodeName = name\n\n\tlet componentName = name\n\tlet proto = klass.prototype\n\n\tif name.indexOf('-') == -1\n\t\tcomponentName = \"{name}-tag\"\n\t\tCustomTagToElementNames[name] = componentName\n\n\tlet basens = proto._ns_\n\tif options.ns\n\t\tlet ns = options.ns\n\t\tlet flags = ns + ' ' + ns + '_ '\n\t\tif basens\n\t\t\tflags += proto.flags$ns \n\t\t\tns += ' ' + basens\n\t\tproto._ns_ = ns\n\t\tproto.flags$ns = flags\n\n\tif proto.#htmlNodeName\n\t\toptions.extends = proto.#htmlNodeName\n\n\tif options.extends\n\t\tproto.#htmlNodeName = options.extends\n\t\tCustomTagConstructors[name] = klass\n\n\t\tif supportsCustomizedBuiltInElements\n\t\t\twindow.customElements.define(componentName,klass,extends: options.extends)\n\telse\n\t\twindow.customElements.define(componentName,klass)\n\n\treturn klass", "import {Element,Text,DocumentFragment,createFragment,createComment} from './core'\n\nextend class DocumentFragment\n\n\tget #parent\n\t\t##up or ##parent\n\n\t# Called to make a documentFragment become a live fragment\n\tdef setup$ flags, options\n\t\t$start = createComment('start')\n\t\t$end = createComment('end')\n\n\t\t$end.replaceWith$ = do(other)\n\t\t\tthis.parentNode.insertBefore(other,this)\n\t\t\treturn other\n\n\t\tthis.appendChild($start)\n\t\tthis.appendChild($end)\n\t\n\t# when we for sure know that the only content should be\n\t# a single text node\n\tdef text$ item\n\t\tunless $text\n\t\t\t$text = this.insert$(item)\n\t\telse\n\t\t\t$text.textContent = item\n\t\treturn\n\t\n\tdef insert$ item, options, toReplace\n\t\tif ##parent\n\t\t\t# if the fragment is attached to a parent\n\t\t\t# we can just proxy the call through\n\t\t\t##parent.insert$(item,options,toReplace or $end)\n\t\telse\n\t\t\tElement.prototype.insert$.call(this,item,options,toReplace or $end)\n\n\tdef insertInto$ parent, before\n\t\tunless ##parent\n\t\t\t##parent = parent\n\t\t\t# console.log 'insertFrgment into',parent,Array.from(self.childNodes)\n\t\t\tparent.appendChild$(this)\n\t\treturn this\n\n\tdef replaceWith$ other, parent\n\t\t$start.insertBeforeBegin$(other)\n\t\tvar el = $start\n\t\twhile el\n\t\t\tlet next = el.nextSibling\n\t\t\tself.appendChild(el)\n\t\t\tbreak if el == $end\n\t\t\tel = next\n\t\t\t\n\t\treturn other\n\n\tdef appendChild$ child\n\t\t$end ? $end.insertBeforeBegin$(child) : self.appendChild(child)\n\t\treturn child\n\n\tdef removeChild$ child\n\t\tchild.parentNode && child.parentNode.removeChild(child)\n\t\tself\n\n\tdef isEmpty$\n\t\tlet el = $start\n\t\tlet end = $end\n\n\t\twhile el = el.nextSibling\n\t\t\tbreak if el == end\n\t\t\treturn false if el isa Element or el isa Text\n\t\treturn true\n\nclass VirtualFragment\n\tdef constructor f, parent\n\t\t__F = f\n\t\t#parent = parent\n\n\tdef appendChild$ item, index\n\t\t# we know that these items are dom elements\n\t\tif $end and #parent\n\t\t\t$end.insertBeforeBegin$(item)\n\t\telif #parent\n\t\t\t#parent.appendChild$(item)\n\t\treturn\n\n\tdef replaceWith$ other\n\t\tself.detachNodes()\n\t\t$end.insertBeforeBegin$(other)\n\t\t#parent.removeChild$($end)\n\t\t#parent = null\n\t\treturn\n\n\tdef joinBefore$ before\n\t\tself.insertInto$(before.parentNode,before)\n\n\tdef insertInto$ parent, before\n\t\tunless #parent\n\t\t\t#parent = parent\n\t\t\tbefore ? before.insertBeforeBegin$($end) : parent.appendChild$($end)\n\t\t\tself.attachNodes()\n\t\treturn this\n\t\n\tdef replace$ other\n\t\tunless #parent\n\t\t\t#parent = other.parentNode\n\t\tother.replaceWith$($end)\n\t\tself.attachNodes()\n\t\tself\n\t\t\n\tdef setup\n\t\tself\n\nclass KeyedTagFragment < VirtualFragment\n\t\n\tdef constructor f, parent\n\t\tsuper\n\n\t\tif !(f & $TAG_FIRST_CHILD$)\n\t\t\t$start = createComment('start')\n\t\t\tparent.appendChild$($start) if parent\n\n\t\tunless f & $TAG_LAST_CHILD$\n\t\t\t$end = createComment('end')\n\t\t\tparent.appendChild$($end) if parent\n\n\t\tself.setup()\n\n\tdef setup\n\t\tself.array = []\n\t\tself.changes = new Map\n\t\tself.dirty = no\n\t\tself.$ = {}\n\n\tdef push item, idx\n\t\t# on first iteration we can merely run through\n\t\tunless __F & $TAG_INITED$\n\t\t\tself.array.push(item)\n\t\t\tself.appendChild$(item)\n\t\t\treturn\n\n\t\tlet toReplace = self.array[idx]\n\n\t\tif toReplace === item\n\t\t\tyes\n\t\telse\n\t\t\tself.dirty = yes\n\t\t\t# if this is a new item\n\t\t\tlet prevIndex = self.array.indexOf(item)\n\t\t\tlet changed = self.changes.get(item)\n\n\t\t\tif prevIndex === -1\n\t\t\t\t# should we mark the one currently in slot as removed?\n\t\t\t\tself.array.splice(idx,0,item)\n\t\t\t\tself.insertChild(item,idx)\n\n\t\t\telif prevIndex === idx + 1\n\t\t\t\tif toReplace\n\t\t\t\t\tself.changes.set(toReplace,-1)\n\t\t\t\tself.array.splice(idx,1)\n\n\t\t\telse\n\t\t\t\tself.array.splice(prevIndex,1) if prevIndex >= 0\n\t\t\t\tself.array.splice(idx,0,item)\n\t\t\t\tself.insertChild(item,idx)\n\n\t\t\tif changed == -1\n\t\t\t\tself.changes.delete(item)\n\t\treturn\n\n\tdef insertChild item, index\n\t\tif index > 0\n\t\t\tlet other = self.array[index - 1]\n\t\t\t# will fail with text nodes\n\t\t\tother.insertAfterEnd$(item)\n\t\telif $start\n\t\t\t$start.insertAfterEnd$(item)\n\t\telse\n\t\t\t#parent.insertAfterBegin$(item)\n\t\treturn\n\n\tdef removeChild item, index\n\t\t# self.map.delete(item)\n\t\t# what if this is a fragment or virtual node?\n\t\tif item.parentNode == #parent\n\t\t\t#parent.removeChild(item)\n\t\treturn\n\n\tdef attachNodes\n\t\tfor item,i in self.array\n\t\t\t$end.insertBeforeBegin$(item)\n\t\treturn\n\n\tdef detachNodes\n\t\tfor item in self.array\n\t\t\t#parent.removeChild(item)\n\t\treturn\n\n\tdef end$ index\n\t\tunless __F & $TAG_INITED$\n\t\t\t__F |= $TAG_INITED$\n\t\t\treturn\n\n\t\tif self.dirty\n\t\t\tself.changes.forEach do |pos,item|\n\t\t\t\tif pos == -1\n\t\t\t\t\tself.removeChild(item)\n\t\t\tself.changes.clear()\n\t\t\tself.dirty = no\n\n\t\t# there are some items we should remove now\n\t\tif self.array.length > index\n\t\t\t\n\t\t\t# remove the children below\n\t\t\twhile self.array.length > index\n\t\t\t\tlet item = self.array.pop()\n\t\t\t\tself.removeChild(item)\n\t\t\t# self.array.length = index\n\t\treturn\n\nclass IndexedTagFragment < VirtualFragment\n\n\tdef constructor f, parent\n\t\tsuper\n\n\t\tunless f & $TAG_LAST_CHILD$\n\t\t\t$end = createComment('end')\n\t\t\tparent.appendChild$($end) if parent\n\n\t\tself.setup()\n\n\tdef setup\n\t\tself.$ = []\n\t\tself.length = 0\n\n\tdef end$ len\n\t\tlet from = self.length\n\t\treturn if from == len or !#parent\n\t\tlet array = self.$\n\t\tlet par = #parent\n\n\t\tif from > len\n\t\t\twhile from > len\n\t\t\t\tpar.removeChild$(array[--from])\n\t\telif len > from\n\t\t\twhile len > from\n\t\t\t\tself.appendChild$(array[from++])\n\t\tself.length = len\n\t\treturn\n\n\tdef attachNodes\n\t\tfor item,i in self.$\n\t\t\tbreak if i == self.length\n\t\t\t$end.insertBeforeBegin$(item)\n\t\treturn\n\n\tdef detachNodes\n\t\tlet i = 0\n\t\twhile i < self.length\n\t\t\tlet item = self.$[i++]\n\t\t\t#parent.removeChild$(item)\n\t\treturn\n\nexport def createLiveFragment bitflags, options, par\n\tconst el = createFragment!\n\tel.setup$(bitflags, options)\n\tel.##up = par if par\n\treturn el\n\nexport def createIndexedFragment bitflags, parent\n\treturn new IndexedTagFragment(bitflags,parent)\n\nexport def createKeyedFragment bitflags, parent\n\treturn new KeyedTagFragment(bitflags,parent)\n\n\n", "import {Node,HTMLElement,CUSTOM_TYPES} from './core'\nimport {createLiveFragment} from './fragment'\nimport {scheduler} from '../scheduler'\n\nconst hydrator = new class\n\titems = []\n\tcurrent = null\n\tlastQueued = null\n\ttests = 0\n\n\tdef flush\n\t\tlet item = null\n\n\t\tif false\n\t\t\tconsole.log 'flush hydrate',items,tests\n\t\t\tfor item,i in items\n\t\t\t\tlet next = items[i + 1]\n\t\t\t\tif next\n\t\t\t\t\tunless next.compareDocumentPosition(item) & Node.DOCUMENT_POSITION_PRECEDING\n\t\t\t\t\t\tconsole.log \"WRONG ORDER!!!\",item,next,next.compareDocumentPosition(item)\n\n\t\twhile item = items.shift!\n\t\t\tcontinue if !item.parentNode or item.hydrated?\n\t\t\t# Mark as inited to stop connectedCallback from early exit\n\t\t\tlet prev = current\n\t\t\tcurrent = item\n\t\t\titem.__F |= $EL_SSR$\n\t\t\titem.connectedCallback!\n\t\t\tcurrent = prev\n\t\treturn\n\n\tdef queue item\n\t\t# let len = items.push(item)\n\t\tlet len = items.length\n\t\tlet idx = 0\n\t\tlet prev = lastQueued\n\t\tlastQueued = item\n\n\t\tlet BEFORE = Node.DOCUMENT_POSITION_PRECEDING\n\t\tlet AFTER = Node.DOCUMENT_POSITION_FOLLOWING\n\n\t\tif len\n\t\t\tlet prevIndex = items.indexOf(prev)\n\t\t\tlet index = prevIndex\n\n\t\t\tlet compare = do(a,b)\n\t\t\t\ttests++\n\t\t\t\ta.compareDocumentPosition(b)\n\n\t\t\tif prevIndex == -1 or prev.nodeName != item.nodeName\n\t\t\t\tindex = prevIndex = 0\n\n\t\t\tlet curr = items[index]\n\n\t\t\twhile curr and compare(curr,item) & AFTER\n\t\t\t\tcurr = items[++index]\n\n\t\t\tif index != prevIndex\n\t\t\t\tcurr ? items.splice(index,0,item) : items.push(item)\n\t\t\telse\n\t\t\t\twhile curr and compare(curr,item) & BEFORE\n\t\t\t\t\tcurr = items[--index]\n\t\t\t\tif index != prevIndex\n\t\t\t\t\tcurr ? items.splice(index + 1,0,item) : items.unshift(item)\n\t\telse\n\t\t\titems.push(item)\n\t\t\tglobal.queueMicrotask(flush.bind(self)) if !current\n\n\t\treturn\n\n\tdef run item\n\t\treturn if active\n\t\t# look for parents that are still hydrated\n\t\t# only the ssr elements that are not yet awakened\n\t\tactive = yes\n\t\t# let all = global.document.getElementsByClassName('__ssr')\n\t\tlet all = global.document.querySelectorAll('.__ssr')\n\t\tconsole.log 'running hydrator',item,all.length,Array.from(all)\n\n\t\tfor item in all\n\t\t\titem.#count ||= 1\n\t\t\titem.#count++\n\t\t\tlet name = item.nodeName\n\t\t\tlet typ = map[name] ||= global.window.customElements.get(name.toLowerCase!) or HTMLElement\n\t\t\tconsole.log 'item type',name,typ,!!CUSTOM_TYPES[name.toLowerCase!]\n\t\t\t# console.log 'hydrate??',item.constructor\n\t\t\tcontinue if !item.connectedCallback or !item.parentNode or item.hydrated?\n\t\t\tconsole.log 'hydrate',item # !!item.parentNode,item,item.connectedCallback\n\t\t\t# item.connectedCallback!\n\n\t\tactive = no\n\nexport def hydrate\n\thydrator.flush!\n\nexport class ImbaElement < HTMLElement\n\tdef constructor\n\t\tsuper()\n\t\tif flags$ns\n\t\t\t# explain?\n\t\t\tflag$ = flagExt$\n\n\t\tsetup$()\n\t\tbuild()\n\n\tdef setup$\n\t\t__slots = {}\n\t\t__F = 0\n\n\tdef #init\n\t\t__F |= ($EL_INITED$ | $EL_HYDRATED$)\n\t\tself\n\t\t\n\tdef flag$ str\n\n\t\tself.className = flags$ext = str\n\t\treturn\n\n\t# returns the named slot - for context\n\tdef slot$ name, ctx\n\t\tif name == '__' and !render\n\t\t\treturn self\n\n\t\t__slots[name] ||= createLiveFragment(0,null,self)\n\n\t# called immediately after construction \n\tdef build\n\t\tself\n\n\t# called before the first mount\n\tdef awaken\n\t\tself\n\t\n\t# called when element is attached to document\n\tdef mount\n\t\tself\n\n\tdef unmount\n\t\tself\n\n\t# called after render\n\tdef rendered\n\t\tself\n\n\t# called before element is stringified on server (SSR)\n\tdef dehydrate\n\t\tself\n\n\t# called before awaken if element was not initially created via imba - on the client\n\tdef hydrate\n\t\t# should only autoschedule if we are not awakening inside a parent context that\n\t\tautoschedule = yes\n\t\tself\n\n\tdef tick\n\t\tcommit()\n\n\t# called when component is (re-)rendered from its parent\n\tdef visit\n\t\tcommit()\n\n\t# Wrapper for rendering. Default implementation\n\tdef commit\n\t\tunless render?\n\t\t\t__F |= $EL_UNRENDERED$\n\t\t\treturn self\n\t\t__F |= $EL_RENDERING$ \n\t\trender && render()\n\t\trendered()\n\t\t__F = (__F | $EL_RENDERED$) & ~$EL_RENDERING$ & ~$EL_UNRENDERED$\n\n\tget autoschedule\n\t\t(__F & $EL_SCHEDULE$) != 0\n\t\n\tset autoschedule value\n\t\tvalue ? (__F |= $EL_SCHEDULE$) : (__F &= ~$EL_SCHEDULE$)\n\n\t###\n\tNaming and accepted values will likely change - experimental\n\n\tyes = render on events / imba.commit\n\tno = force manual render\n\tnull / undefined = render via parent\n\t(n)s = render every n s\n\t(n)ms = render every n ms\n\t(n)fps = render n times per second\n\t###\n\tset autorender value\n\t\tlet o = #autorender ||= {}\n\t\to.value = value\n\t\tscheduler.schedule(self,o) if mounted?\n\t\treturn\n\n\tget render?\n\t\treturn !suspended?\n\n\tget mounting?\n\t\treturn (__F & $EL_MOUNTING$) != 0\n\n\tget mounted?\n\t\treturn (__F & $EL_MOUNTED$) != 0\n\t\n\tget awakened?\n\t\treturn (__F & $EL_AWAKENED$) != 0\n\t\n\tget rendered?\n\t\treturn (__F & $EL_RENDERED$) != 0\n\n\tget suspended?\n\t\treturn (__F & $EL_SUSPENDED$) != 0\n\n\tget rendering?\n\t\treturn (__F & $EL_RENDERING$) != 0\n\t\n\tget scheduled?\n\t\treturn (__F & $EL_SCHEDULED$) != 0\n\n\tget hydrated?\n\t\treturn (__F & $EL_HYDRATED$) != 0\n\n\tget ssr?\n\t\treturn (__F & $EL_SSR$) != 0\n\n\tdef schedule\n\t\tscheduler.on('commit',self)\n\t\t__F |= $EL_SCHEDULED$\n\t\treturn self\n\n\tdef unschedule\n\t\tscheduler.un('commit',self)\n\t\t__F &= ~$EL_SCHEDULED$\n\t\treturn self\n\n\tdef suspend cb = null\n\t\tlet val = flags.incr('_suspended_')\n\t\t__F |= $EL_SUSPENDED$\n\t\tif cb isa Function\n\t\t\tawait cb()\n\t\t\tunsuspend!\n\t\tself\n\n\tdef unsuspend\n\t\tlet val = flags.decr('_suspended_')\n\t\tif val == 0\n\t\t\t__F &= ~$EL_SUSPENDED$\n\t\t\tcommit! if $EL_UNRENDERED$\n\n\t\tself\n\n\tdef end$\n\t\tvisit()\n\n\tdef open$\n\t\tif __F & $EL_SSR$\n\t\t\t__F = __F & ~$EL_SSR$\n\t\t\t# remove flag\n\t\t\tclassList.remove('_ssr_')\n\t\t\tif flags$ext and flags$ext.indexOf('_ssr_') == 0\n\t\t\t\tflags$ext = flags$ext.slice(5)\n\t\t\tinnerHTML = ''\n\t\tself\n\n\tdef connectedCallback\n\t\tlet flags = __F\n\t\tlet inited = flags & $EL_INITED$\n\t\tlet awakened = flags & $EL_AWAKENED$\n\n\t\tif !inited and !(flags & $EL_SSR$)\n\t\t\thydrator.queue(self)\n\t\t\treturn\n\n\t\t# return if we are already in the process of mounting - or have mounted\n\t\tif flags & ($EL_MOUNTING$ | $EL_MOUNTED$)\n\t\t\treturn\n\t\t\n\t\t__F |= $EL_MOUNTING$\n\n\t\tunless inited\n\t\t\t#init!\n\n\t\tunless flags & $EL_HYDRATED$\n\t\t\t# clearly seems wrong?\n\t\t\tflags$ext = className\n\t\t\t__F |= $EL_HYDRATED$\n\t\t\tself.hydrate()\n\t\t\tcommit()\n\n\t\tunless awakened\n\t\t\tawaken()\n\t\t\t__F |= $EL_AWAKENED$\n\n\t\tlet res = mount()\n\t\tif res && res.then isa Function\n\t\t\tres.then(scheduler.commit)\n\n\t\tflags = __F = (__F | $EL_MOUNTED$) & ~$EL_MOUNTING$\n\t\t\n\t\tif flags & $EL_SCHEDULE$\n\t\t\tschedule()\n\t\t\n\t\t\n\t\tscheduler.schedule(self,#autorender) if #autorender\n\t\treturn this\n\n\tdef disconnectedCallback\n\t\t__F = __F & (~$EL_MOUNTED$ & ~$EL_MOUNTING$)\n\t\tif __F & $EL_SCHEDULED$\n\t\t\t# trigger potential unschedule listeners\n\t\t\tunschedule()\n\n\t\tunmount()\n\t\tscheduler.unschedule(self,#autorender) if #autorender", "export const renderContext = {\n\tcontext: null\n}", "import {renderContext} from './context'\nimport {scheduler} from '../scheduler'\n\nexport def render blk, ctx = {}\n\tlet prev = renderContext.context\n\trenderContext.context = ctx\n\tlet res = blk(ctx)\n\tif renderContext.context == ctx\n\t\trenderContext.context = prev\n\treturn res\n\nexport def mount mountable, into\n\tlet parent = into or global.document.body\n\tlet element = mountable\n\tif mountable isa Function\n\t\tlet ctx = {_: parent}\n\t\tlet tick = do\n\t\t\tlet prev = renderContext.context\n\t\t\trenderContext.context = ctx\n\t\t\tlet res = mountable(ctx)\n\t\t\tif renderContext.context == ctx\n\t\t\t\trenderContext.context = prev\n\t\t\treturn res\n\t\telement = tick()\n\t\tscheduler.listen('commit',tick)\n\telse\n\t\t# automatic scheduling of element - even before\n\t\t# element.__schedule = yes\n\t\telement.__F |= $EL_SCHEDULE$\n\n\tparent.appendChild(element)", "# imba$imbaPath=global\nimport {Event,Element} from '../dom/core'\nimport {listen,once,emit,unlisten,parseTime} from '../utils'\nimport {scheduler} from '../scheduler'\n\nconst keyCodes = {\n\tesc: [27],\n\ttab: [9],\n\tenter: [13],\n\tspace: [32],\n\tup: [38],\n\tdown: [40],\n\tleft: [37],\n\tright: [39],\n\tdel: [8,46]\n}\n\nexport const events = {}\n\nexport def use_events\n\tyes\n\ndef Event.log$mod ...params\n\tconsole.log(...params)\n\treturn true\n\n# Skip unless matching selector\ndef Event.sel$mod expr\n\treturn !!event.target.matches(String(expr))\n\t\ndef Event.if$mod expr\n\treturn !!expr\n\t\ndef Event.wait$mod time = 250\n\tnew Promise(do setTimeout($1,parseTime(time)))\n\ndef Event.self$mod\n\treturn event.target == element\n\t\ndef Event.throttle$mod time = 250\n\treturn false if handler.throttled\n\thandler.throttled = yes\n\n\telement.flags.incr('throttled')\n\n\tonce(current,'end') do\n\t\tsetTimeout(&,parseTime(time)) do\n\t\t\telement.flags.decr('throttled')\n\t\t\thandler.throttled = no\n\treturn true\n\ndef Event.debounce$mod time = 250\n\tlet queue = state.debounced ||= []\n\tqueue.push(queue.last = event)\n\tnew Promise do(resolve)\n\t\tsetTimeout(&,parseTime(time)) do\n\t\t\tif queue.last == event\n\t\t\t\t# if this event is still the last\n\t\t\t\t# add the debounced queue to the event\n\t\t\t\t# and let the chain continue\n\t\t\t\tevent.debounced = queue\n\t\t\t\thandler.state = {}\n\t\t\t\tresolve(true)\n\t\t\telse\n\t\t\t\tresolve(false)\n\t\ndef Event.flag$mod name,sel\n\t# console.warn 'event flag',self,arguments,id,step\n\tlet el = sel isa Element ? sel : (sel ? element.closest(sel) : element)\n\treturn true unless el\n\tlet step = step\n\tstate[step] = id\n\n\tel.flags.incr(name)\n\n\tlet ts = Date.now!\n\t\n\tonce(current,'end') do\n\t\tlet elapsed = Date.now! - ts\n\t\tlet delay = Math.max(250 - elapsed,0)\n\t\tsetTimeout(&,delay) do el.flags.decr(name)\n\treturn true\n\t\ndef Event.busy$mod sel\n\treturn Event.flag$mod.call(this,'busy',250,sel)\n\ndef Event.mod$mod name\n\t# FIXME\n\treturn Event.flag$mod.call(this,\"mod-{name}\",global.document.documentElement)\n\n# could cache similar event handlers with the same parts\nexport class EventHandler\n\tdef constructor params,closure\n\t\tself.params = params\n\t\tself.closure = closure\n\n\tdef getHandlerForMethod el, name\n\t\treturn null unless el\n\t\tel[name] ? el : self.getHandlerForMethod(el.parentNode,name)\n\n\t# okay to auto-import these?\n\tdef emit name, ...params do emit(self,name,params)\n\tdef on name, ...params do listen(self,name,...params)\n\tdef once name, ...params do once(self,name,...params)\n\tdef un name, ...params do unlisten(self,name,...params)\n\n\tdef handleEvent event\n\t\tlet target = event.target\n\t\tlet element = event.currentTarget\n\t\tlet mods = self.params\n\t\tlet i = 0\n\t\tlet awaited = no\n\t\tlet prevRes = undefined\n\t\t\n\t\tself.count ||= 0\n\t\tself.state ||= {}\n\n\t\tlet state = {\n\t\t\telement: element\n\t\t\tevent: event\n\t\t\tmodifiers: mods\n\t\t\thandler: this\n\t\t\tid: ++self.count\n\t\t\tstep: -1\n\t\t\tstate: self.state\n\t\t\tcommit: null\n\t\t\tcurrent: null\n\t\t}\n\t\t\n\t\tstate.current = state\n\n\t\tif event.handle$mod\n\t\t\tif event.handle$mod.apply(state,mods.options or []) == false\n\t\t\t\treturn\n\n\t\tlet guard = Event[self.type + '$handle'] or Event[event.type + '$handle'] or event.handle$mod\n\t\t\t\n\t\tif guard and guard.apply(state,mods.options or []) == false\n\t\t\treturn\n\t\t\n\t\t# let object = state.proxy or event \n\t\t\n\t\tself.currentEvents ||= new Set\n\t\tself.currentEvents.add(event)\t\n\n\t\tfor own handler,val of mods\n\t\t\tstate.step++\n\n\t\t\tif handler[0] == '_'\n\t\t\t\tcontinue\n\n\t\t\tif handler.indexOf('~') > 0\n\t\t\t\thandler = handler.split('~')[0]\n\t\t\t\n\t\t\tlet modargs = null\n\t\t\tlet ismod = no\n\t\t\tlet args = [event,state]\n\t\t\tlet res = undefined\n\t\t\tlet context = null\n\t\t\tlet m\n\t\t\tlet isstring = typeof handler == 'string'\n\t\t\t\n\t\t\tif handler[0] == '$' and handler[1] == '_' and val[0] isa Function\n\t\t\t\thandler = val[0]\n\t\t\t\targs = [event,state].concat(val.slice(1))\n\t\t\t\tcontext = element\n\n\t\t\t# parse the arguments\n\t\t\telif val isa Array\n\t\t\t\targs = val.slice()\n\t\t\t\tmodargs = args\n\n\t\t\t\tfor par,i in args\n\t\t\t\t\t# what about fully nested arrays and objects?\n\t\t\t\t\t# ought to redirect this\n\t\t\t\t\tif typeof par == 'string' && par[0] == '~' and par[1] == '$'\n\t\t\t\t\t\tlet name = par.slice(2)\n\t\t\t\t\t\tlet chain = name.split('.')\n\t\t\t\t\t\tlet value = state[chain.shift()] or event\n\n\t\t\t\t\t\tfor part,i in chain\n\t\t\t\t\t\t\tvalue = value ? value[part] : undefined\n\n\t\t\t\t\t\targs[i] = value\n\n\t\t\tif typeof handler == 'string' and m = handler.match(/^(emit|flag|mod|moved|pin|fit|refit|map|remap|css)-(.+)$/)\n\t\t\t\tmodargs = args = [] unless modargs\n\t\t\t\targs.unshift(m[2])\n\t\t\t\thandler = m[1]\n\n\t\t\t# check if it is an array?\n\t\t\tif handler == 'stop'\n\t\t\t\tevent.stopImmediatePropagation()\n\t\t\telif handler == 'prevent'\n\t\t\t\tevent.preventDefault()\n\t\t\telif handler == 'commit'\n\t\t\t\tstate.commit = yes\n\t\t\telif handler == 'silence' or handler == 'silent'\n\t\t\t\tstate.commit = no\n\t\t\telif handler == 'ctrl'\n\t\t\t\tbreak unless event.ctrlKey\n\t\t\telif handler == 'alt'\n\t\t\t\tbreak unless event.altKey\n\t\t\telif handler == 'shift'\n\t\t\t\tbreak unless event.shiftKey\n\t\t\telif handler == 'meta'\n\t\t\t\tbreak unless event.metaKey\n\t\t\telif handler == 'once'\n\t\t\t\t# clean up bound data as well\n\t\t\t\telement.removeEventListener(event.type,self)\n\t\t\telif handler == 'options'\n\t\t\t\tcontinue\n\n\t\t\telif keyCodes[handler]\n\t\t\t\tunless keyCodes[handler].indexOf(event.keyCode) >= 0\n\t\t\t\t\tbreak\n\n\t\t\telif handler == 'emit'\n\t\t\t\tlet name = args[0]\n\t\t\t\tlet detail = args[1] # is custom event if not?\n\t\t\t\tlet e = new CustomEvent(name, bubbles: true, detail: detail) # : new Event(name)\n\t\t\t\te.originalEvent = event\n\t\t\t\tlet customRes = element.dispatchEvent(e)\n\n\t\t\telif typeof handler == 'string'\n\t\t\t\tlet fn = (self.type and Event[self.type + '$' + handler + '$mod'])\n\t\t\t\tfn ||= event[handler + '$mod'] or Event[event.type + '$' + handler] or Event[handler + '$mod']\n\t\t\t\t\n\t\t\t\tif fn isa Function\n\t\t\t\t\thandler = fn\n\t\t\t\t\tcontext = state\n\t\t\t\t\targs = modargs or []\n\t\t\t\t\tismod = yes\n\n\t\t\t\t# should default to first look at closure - no?\n\t\t\t\telif handler[0] == '_'\n\t\t\t\t\thandler = handler.slice(1)\n\t\t\t\t\tcontext = self.closure\n\t\t\t\telse\n\t\t\t\t\tcontext = self.getHandlerForMethod(element,handler)\n\n\t\t\tif handler isa Function\n\t\t\t\tres = handler.apply(context or element,args)\n\t\t\telif context\n\t\t\t\tres = context[handler].apply(context,args)\n\n\t\t\tif state.commit === null and !ismod\n\t\t\t\tstate.commit = yes\n\n\t\t\tif res and res.then isa Function and res != scheduler.$promise\n\t\t\t\tscheduler.commit! if state.commit\n\t\t\t\tawaited = yes\n\t\t\t\t# TODO what if await fails?\n\t\t\t\tres = await res\n\n\t\t\tif res === false\n\t\t\t\tbreak\n\n\t\t\tstate.value = res\n\t\t\n\t\temit(state,'end',state)\n\n\t\tscheduler.commit! if state.commit\n\n\t\tself.currentEvents.delete(event)\n\t\tif self.currentEvents.size == 0\n\t\t\tself.emit('idle')\n\t\t# what if the result is a promise\n\t\treturn\n\n\n# Add methods to Element\nextend class Element\n\n\tdef on$ type, mods, scope\n\t\tlet check = 'on$' + type\n\t\tlet handler\n\n\t\thandler = new EventHandler(mods,scope)\n\n\t\tlet capture = mods.capture\n\t\tlet passive = mods.passive\n\n\t\tlet o = capture\n\n\t\tif passive\n\t\t\to = {passive: passive, capture: capture}\n\n\t\t# check if a custom handler exists for this type?\n\t\tif self[check] isa Function\n\t\t\thandler = self[check](mods,scope,handler)\n\t\telse\n\t\t\tself.addEventListener(type,handler,o)\n\t\treturn handler\n", "# imba$runtimez=local\n\nlet routerInstance = null\n\nimport {EventEmitter} from 'events'\nimport {Node,Element,Document,createComment} from '../dom/core'\nimport {Location} from './location'\nimport {History} from './history'\nimport {Request} from './request'\nimport {Route,RootRoute} from './route'\nimport {commit,scheduler} from '../scheduler'\nimport {proxy} from '../utils'\nimport {Queue} from '../queue'\n\nextend class Document\n\tget router\n\t\t#router ||= new Router(self)\n\nexport def use_router\n\tyes\n\nexport const router = proxy do\n\tglobal.document.router\n\nexport class Router < EventEmitter\n\n\t# support redirects\n\tdef constructor doc, o = {}\n\t\tsuper()\n\t\t#routes = {}\n\t\taliases = {}\n\t\tredirects = {}\n\t\trules = {}\n\t\toptions = o\n\t\tbusy = []\n\t\t#version = 0\n\t\t#doc = doc\n\t\tqueue = new Queue\n\t\tweb? = !!doc.defaultView\n\t\troot = new RootRoute(self)\n\n\t\thistory = $web$ ? global.window.history : (new History(self))\n\t\tlocation = new Location(o.url or doc.location.href,self)\n\t\tmode = o.mode or 'history'\n\n\t\tif $web$\n\t\t\tqueue.on 'busy' do\n\t\t\t\tglobal.document.flags.incr('_routing_')\n\t\t\n\t\t\tqueue.on 'idle' do\n\t\t\t\tglobal.document.flags.decr('_routing_')\n\t\t\t\tcommit!\n\t\tself.setup!\n\t\tself\n\n\tget origin\n\t\t#origin ||= #doc.location.origin\n\n\tget query\n\t\tlocation.query\n\n\tdef init\n\t\trefresh(mode: 'replace')\n\t\tself\n\n\tdef alias from, to\n\t\taliases[from] = to\n\t\tlocation.reparse!\n\t\tself\n\n\tdef touch\n\t\t#version++\n\n\tdef option key, value\n\t\tif value == undefined\n\t\t\treturn options[key]\n\t\telse\n\t\t\toptions[key] = value\n\t\treturn self\n\t\t\n\tget realpath\n\t\tif $web$\n\t\t\tlet loc = #doc.location\n\t\t\treturn loc.href.slice(loc.origin.length)\n\t\telse\n\t\t\treturn location.path\n\n\tget state\n\t\t{}\n\n\tget ctx\n\t\t#request\n\t\t\n\tdef pushState state, title, url\n\t\thistory.pushState(state,title or null,String(url))\n\t\n\tdef replaceState state, title, url\n\t\thistory.replaceState(state,title or null,String(url))\n\n\t# called whenever the location might have changed for some reason\n\tdef refresh params = {}\n\t\treturn if refreshing\n\t\trefreshing = yes\n\n\t\tlet original = location\n\t\tlet loc = Location.parse(params.location or realpath,self)\n\t\tlet mode = params.mode\n\t\tlet prev = #request\n\t\t# console.log 'refreshing router',params,loc,mode,original\n\t\t# we need to compare with the previously stored location\n\t\t# also see if state is different?\n\t\tif !loc.equals(original) or !prev\n\t\t\t# console.log \"actual url has changed!!\",String(original),'to',String(loc)\n\t\t\tlet req = new Request(self,loc,original)\n\t\t\treq.mode = mode\n\t\t\t#request = req\n\t\t\tself.emit('beforechange',req)\n\n\t\t\tif req.aborted\n\t\t\t\t# console.log \"request was aborted\",params\n\t\t\t\t# what about silent abort?\n\t\t\t\tlet res = !req.forceAbort && global.window.confirm(\"Are you sure you want to leave? You might have unsaved changes\")\n\n\t\t\t\tif res\n\t\t\t\t\treq.aborted = no\n\t\t\t\t# if we don't confirm, push the previous state again\n\t\t\t\telif mode == 'pop' # params:pop\n\t\t\t\t\tself.pushState(self.state,null,String(original))\n\t\t\t\telif mode == 'replace' # mode != 'push' # !params:push\n\t\t\t\t\tself.replaceState(self.state,null,String(original))\n\n\t\t\t\t# if we're not popping - should happen before we are changing\n\n\t\t\tunless req.aborted\n\t\t\t\tlocation = req.location\n\t\t\t\t# after each middleware - see if we have redirected or thrown anything?\n\n\t\t\t\tif mode == 'push'\n\t\t\t\t\tself.pushState(params.state or self.state,null,String(location))\n\t\t\t\telif mode == 'replace' # params.replace\n\t\t\t\t\tself.replaceState(params.state or self.state,null,String(location))\n\t\t\t\t\t\n\t\t\t\tif $web$\n\t\t\t\t\tlocation.state = global.window.history.state\n\t\t\t\t\t\n\t\t\t\tself.emit('change',req)\n\t\t\t\ttouch!\n\t\t\t\tcommit!\n\t\t\n\t\tif $web$\n\t\t\tscheduler.add do \n\t\t\t\tlet hash = #doc.location.hash\n\t\t\t\tif hash != #hash\n\t\t\t\t\tself.emit('hashchange',#hash = hash)\n\n\t\trefreshing = no\n\t\tself\n\t\n\tdef onpopstate e\n\t\tself.refresh(pop: yes, mode: 'pop')\n\t\tself\n\n\tdef onbeforeunload e\n\t\tlet req = new Request(self,null,location)\n\t\tself.emit('beforechange',req)\n\t\treturn true if req.aborted\n\t\treturn\n\t\t\n\tdef onhashchange e\n\t\temit('hashchange',#hash = #doc.location.hash)\n\t\tcommit!\n\n\tdef setup\n\t\tif $web$\n\t\t\tonclick = onclick.bind(self)\n\t\t\tonhashchange = onhashchange.bind(self)\n\t\t\tlet win = global.window\n\t\t\t#hash = #doc.location.hash\n\t\t\tlocation = Location.parse(realpath,self)\n\t\t\thistory.replaceState(self.state,null,String(location))\n\n\t\t\twin.onpopstate = self.onpopstate.bind(self) # do |e| onpopstate(e)\n\t\t\twin.onbeforeunload = self.onbeforeunload.bind(self)\n\n\t\t\twin.addEventListener('hashchange',onhashchange)\n\t\t\twin.addEventListener('click',onclick,capture: yes)\n\t\t\twin.document.documentElement.emit('routerinit',self)\n\t\t\trefresh\n\t\tself\n\t\t\n\tdef onclick e\n\t\treturn if e.metaKey or e.altKey\n\n\t\tlet a = null\n\t\tlet r = null\n\t\tlet t = e.target\n\t\t\n\t\twhile t and (!a or !r)\n\t\t\ta = t if !a and t.nodeName == 'A'\n\t\t\tr = t if !r and t.#routeTo\n\t\t\tt = t.parentNode\n\n\t\tif a and r != a and (!r or r.contains(a))\n\t\t\t\n\t\t\tlet href = a.getAttribute('href')\n\t\t\tif href && !href.match(/\\:\\/\\//) and !a.getAttribute('target') and !a.classList.contains('external')\n\t\t\t\ta.addEventListener('click',onclicklink.bind(self),once: true)\n\t\tyes\n\t\t\n\tdef onclicklink e\n\t\tlet a = e.currentTarget or e.target\n\n\t\tif a.#routeTo\n\t\t\ta.#routeTo.resolve!\n\n\t\tlet href = a.getAttribute('href')\n\t\tlet url = new URL(a.href)\n\t\tlet target = url.href.slice(url.origin.length)\n\t\tlet currpath = realpath.split('#')[0]\n\t\tlet newpath = target.split('#')[0]\n\n\t\t# console.log 'clicklink',target,url,currpath,newpath\n\t\t# checking if we are only changing the hash here\n\t\tif currpath == newpath\n\t\t\tglobal.document.location.hash = url.hash\n\t\telif a.#routeTo\n\t\t\ta.#routeTo.go!\n\t\telse\n\t\t\tself.go(target)\n\n\t\te.stopPropagation()\n\t\te.preventDefault()\n\n\tget url\n\t\treturn location.url\n\n\tget path\n\t\tlet path = location.path\n\t\treturn aliases[path] or path\n\n\tget pathname\n\t\tlocation.pathname\n\n\tdef serializeParams params\n\t\tif params isa Object\n\t\t\tlet value = for own key,val of params\n\t\t\t\t\t[key,global.encodeURI(val)].join(\"=\")\n\t\t\treturn value.join(\"&\")\n\t\treturn params or ''\n\n\tget hash\n\t\t#hash\n\n\tset hash value\n\t\tif $web$\n\t\t\thistory.replaceState({},null,'#' + self.serializeParams(value))\n\t\t\n\tdef match pattern\n\t\troute(pattern).match(path)\n\t\t\n\tdef route pattern\n\t\troot.route(pattern)\n\n\tdef go url, state = {}\n\t\tlet loc = location.clone().update(url,state)\n\t\tself.refresh(push: yes, mode: 'push', location: loc, state: state)\n\t\tself\n\t\t\n\tdef replace url, state = {}\n\t\tlet loc = location.clone().update(url,state)\n\t\tself.refresh(replace: yes, mode: 'replace', location: loc, state: state)\n\n\nexport class ElementRoute\n\tdef constructor node, path, parent, options = {}\n\t\tself.parent = parent\n\t\tnode = node\n\t\t#path = path\n\t\t#match = null\n\t\t#options = options\n\t\t#cache = {}\n\t\t#unmatched = {}\n\t\t#active = null\n\t\t#resolvedPath = null\n\t\t#dataKey = Symbol!\n\t\t#activeKey = Symbol!\n\t\t#urlKey = Symbol!\n\n\tget router\n\t\tnode.ownerDocument.router\n\n\tget route\n\t\tlet pr = parent ? parent.route : self.router\n\t\tpr.route(#path)\n\n\tget match\n\t\t#match\n\n\tget params\n\t\t(#match or #unmatched)\n\n\tget state\n\t\tlet map = #dataMap ||= new Map\n\t\tlet pars = params\n\t\tlet data = #dataMap.get(pars)\n\t\tdata || #dataMap.set(pars,data = {})\n\t\treturn data\n\n\tset state value\n\t\t(#dataMap ||= new Map).set(params,value)\n\n\tset path value\n\t\tif #path =? value\n\t\t\t# TODO only update router if we know that we have subroutes\n\t\t\tself.router.touch!\n\n\tget isActive\n\t\t!!#active\n\n\tdef resolve\n\t\tlet v = self.router.#version\n\t\treturn unless #version =? v\n\t\t\t\n\t\tlet r = route\n\t\tlet o = #options\n\t\tlet url = self.router.path\n\t\tlet match = r.match(url)\n\t\tlet shown = #active\n\t\tlet last = #match\n\t\tlet changed = match != last\n\t\tlet prevUrl = match and match[#urlKey]\n\n\t\tif match\n\t\t\t#active = true\n\t\t\t#match = match\n\t\t\tmatch[#urlKey] = url\n\t\t\t\n\t\tif match\n\t\t\tif changed or (prevUrl != url)\n\t\t\t\t#resolved(match,last,prevUrl)\n\n\t\tif !shown and match\n\t\t\t#enter!\n\n\t\tif !match and (shown or shown === null)\n\t\t\t#active = false\n\t\t\t#leave!\n\n\t\treturn #match\n\n\n\tdef #enter\n\t\tnode.flags.remove('not-routed')\n\t\tnode.flags.add('routed')\n\t\tnode..routeDidEnter(self)\n\t\t\n\tdef #resolved match,prev,prevUrl = ''\n\t\tnode..routeDidResolve(self,match,prev,prevUrl)\n\n\tdef #leave\n\t\t# replace flag?\n\t\tnode.flags.add('not-routed')\n\t\tnode.flags.remove('routed')\n\t\tnode..routeDidLeave(self)\n\nexport class ElementRouteTo < ElementRoute\n\t\n\tdef #enter\n\t\tself\n\t\t\n\tdef #resolved\n\t\tself\n\t\t\n\tdef #leave\n\t\tself\n\n\tdef resolve\n\t\tlet v = self.router.#version\n\t\treturn unless #version =? v\n\n\t\tlet o = #options\n\t\tlet r = route\n\t\tlet url = self.router.path\n\t\tlet href = route.resolve(url)\n\t\tlet match = route.match(url)\n\n\t\tif match\n\t\t\t#match = match\n\t\t\t#match[#urlKey] = url\n\n\t\tif o.sticky and #match\n\t\t\thref = #match[#urlKey]\n\n\t\tif #href =? href\n\t\t\tnode.setAttribute('href',href) if node.nodeName == 'A'\n\n\t\tnode.flags.toggle('active',!!match)\n\t\treturn\n\t\n\tdef go\n\t\tresolve!\n\n\t\tif #options and #options.replace\n\t\t\tself.router.replace(#href)\n\t\telse\n\t\t\tself.router.go(#href)\n\nextend class Node\n\tget router\n\t\townerDocument.router\n\nextend class Element\n\tset route value\n\t\tif #route\n\t\t\t#route.path = value\n\t\t\treturn\n\n\t\tlet par = value[0] != '/' ? #context.route : null\n\t\t#route = new ElementRoute(self,value,par,route__)\n\n\t\tself.end$ = self.end$routed\n\t\t\n\t\tself.insertInto$ = do(parent)\n\t\t\t# should base this on a modifier?\n\t\t\t# what about replaceWith etc?\n\t\t\tparent.appendChild$(#route.isActive ? self : #placeholder__)\n\n\tget route\n\t\t#route\n\n\tset route-to value\n\t\tif #routeTo\n\t\t\t#routeTo.path = value\n\t\t\treturn\n\n\t\tlet par = value[0] != '/' ? #context.route : null\n\t\t#route = #routeTo = new ElementRouteTo(self,value,par,routeTo__)\n\t\tself.end$ = self.end$routeTo\n\n\t\t# really? shouldnt this be handled by the main router click listener instead?\n\t\tself.onclick = do(e)\n\t\t\tif !e.altKey and !e.metaKey and !e.#routeHandler\n\t\t\t\te.preventDefault!\n\t\t\t\te.#routeHandler = #routeTo\n\t\t\t\t#routeTo.go!\n\n\tdef end$routed\n\t\tif #route\n\t\t\t#route.resolve!\n\t\t\treturn unless #route.isActive\n\t\t\n\t\tvisit! if visit\n\n\tdef end$routeTo\n\t\tif #routeTo\n\t\t\t#routeTo.resolve!\n\n\t\tvisit! if visit\n\n\tdef routeDidEnter route\n\t\t#attachToParent!\n\n\tdef routeDidLeave route\n\t\t#detachFromParent!\n\n\tdef routeDidResolve route, match, prev\n\t\tif self.routed isa Function and (match != prev)\n\t\t\tself.router.queue.add do\n\t\t\t\tsuspend!\n\t\t\t\tlet res = await self.routed(match,route.state,prev)\n\t\t\t\tunsuspend!\n\t\treturn", "\nexport const ROUTES = {}\n\nexport class Location\n\t\n\tstatic def parse url, router\n\t\tif url isa Location\n\t\t\treturn url\n\t\treturn new Location(url,router)\n\n\tdef constructor url, router\n\t\trouter = router\n\t\tself.parse(url)\n\t\n\tdef parse url\n\t\turl = new URL(url,router.origin) unless url isa URL\n\t\tif let alias = router..aliases[url.pathname]\n\t\t\turl.pathname = alias\n\t\tself.url = url\n\t\tself\n\n\tget active?\n\t\trouter.location == self\n\n\tdef reparse\n\t\tparse(url)\n\t\t\n\t# should definitely add match here\n\tget searchParams\n\t\turl.searchParams\n\t\n\tdef search\n\t\tlet str = searchParams ? searchParams.toString() : ''\n\t\tstr ? ('?' + str) : ''\n\t\t\n\tdef update value\n\t\tif value isa Object\n\t\t\tfor own k,v of value\n\t\t\t\tself.searchParams.set(k,v)\n\n\t\telif typeof value == 'string'\n\t\t\tself.parse(value)\n\t\treturn self\n\n\tdef clone\n\t\tnew Location(url.href,router)\n\t\t\n\tdef equals other\n\t\tself.toString() == String(other)\n\t\n\tget href\n\t\turl.href\n\n\tget path\n\t\turl.href.slice(url.origin.length)\n\n\tget pathname\n\t\turl.pathname\n\n\tget query\n\t\t#query ||= new Proxy({},{\n\t\t\tget: #getQueryParam.bind(self)\n\t\t\tset: #setQueryParam.bind(self)\n\t\t})\n\t\t\n\tdef toString\n\t\thref\n\n\tdef #getQueryParam target, name\n\t\tsearchParams.get(name)\n\n\tdef #setQueryParam target, name, value\n\t\tlet curr = #getQueryParam(target,name)\n\t\tif curr != value\n\t\t\t# console.log 'should set param',name,value,curr\n\t\t\tif (value == null or value == '')\n\t\t\t\tsearchParams.delete(name)\n\t\t\telse\n\t\t\t\tsearchParams.set(name,value)\n\n\t\t\tif active?\n\t\t\t\t# need to improve how we update the state?\n\t\t\t\trouter.history.replaceState({},null,url.toString!)\n\t\t\t\trouter.touch!\n\t\treturn yes\n", "import {Location} from './location'\n# import Route from './route'\n\nexport class Request\n\tdef constructor router, loc, referrer\n\t\trouter = router\n\t\tif loc\n\t\t\tlocation = Location.parse(loc)\n\t\t\toriginal = location.clone!\n\n\t\treferrer = referrer\n\n\tdef redirect path\n\t\tlocation..update(path)\n\t\tself\n\t\t\n\tget path\n\t\tlocation..path\n\t\t\n\tget url\n\t\tlocation..toString!\n\t\t\n\tset path value\n\t\tlocation.path = value\n\n\tdef abort forced = no\n\t\taborted = yes\n\t\tforceAbort = forced if forced\n\t\tself\n\n\tdef match str\n\t\tlocation ? router.route(str).match(path) : null", "const cacheMap = new Map\nconst urlCache = {}\nconst queryCache = {}\n\ndef cacheForMatch match\n\tunless cacheMap.has(match)\n\t\tlet map = new Map\n\t\tcacheMap.set(match,map)\n\t\treturn map\n\treturn cacheMap.get(match)\n\ndef combinedDeepMatch parent, params\n\tlet map = cacheForMatch(parent)\n\tunless map.has(params)\n\t\tlet item = Object.create(parent)\n\t\tObject.assign(item,params)\n\t\tmap.set(params,item)\n\t\treturn item\n\n\treturn map.get(params)\n\nexport class Match\n\ndef parseUrl str\n\tif urlCache[str]\n\t\treturn urlCache[str]\n\n\tlet url = urlCache[str] = {url: str}\n\n\tlet qryidx = str.indexOf('?')\n\tlet hshidx = str.indexOf('#')\n\n\tif hshidx >= 0\n\t\turl.hash = str.slice(hshidx + 1)\n\t\tstr = url.url = str.slice(0,hshidx)\n\t\n\tif qryidx >= 0\n\t\tlet q = url.query = str.slice(qryidx + 1)\n\t\tstr = str.slice(0,qryidx)\n\t\turl.query = queryCache[q] ||= new URLSearchParams(q)\n\t\n\turl.path = str\n\treturn url\n\nexport class RootRoute\n\tconstructor router\n\t\trouter = router\n\t\tfullPath = ''\n\t\t#routes = {}\n\t\t#match = new Match\n\t\t#match.path = ''\n\t\n\tdef route pattern\n\t\t#routes[pattern] ||= new Route(router,pattern,self)\n\n\tdef match\n\t\treturn #match\n\t\n\tdef resolve url\n\t\treturn '/'\n\nexport class Route\n\tdef constructor router, str, parent\n\t\tself.parent = (parent or router.rootRoute)\n\t\trouter = router\n\t\tstatus = 200\n\t\tpath = str\n\t\t#symbol = Symbol!\n\t\t#matches = {}\n\t\t#routes = {}\n\t\n\tdef route pattern\n\t\t#routes[pattern] ||= new Route(router,pattern,self)\n\n\tget fullPath\n\t\t\"{parent.fullPath}/{$path}\"\n\t\n\tdef load cb\n\t\trouter.queue.add cb\n\t\t\n\tset path path\n\t\treturn if $path == path\n\n\t\traw = path\n\t\t$path = path\n\t\tgroups = []\n\t\tcache = {}\n\t\tdynamic = no\n\t\t\n\t\tif path.indexOf('?') >= 0\n\t\t\tlet parts = path.split('?')\n\t\t\tpath = parts.shift()\n\t\t\tquery = {}\n\t\t\t# loop through and create regexes for matching?\n\t\t\tfor pair in parts.join('?').split('&')\n\t\t\t\tcontinue unless pair\n\t\t\t\tlet [k,v] = pair.split('=')\n\t\t\t\tif k[0] == '!'\n\t\t\t\t\tdynamic = yes\n\t\t\t\t\tk = k.slice(1)\n\t\t\t\t\tv = false\n\t\t\t\tif v === ''\n\t\t\t\t\tv = false\n\t\t\t\tif v and v[0] == ':'\n\t\t\t\t\tdynamic = yes\n\n\t\t\t\tquery[k] = v or (v === false ? false : true)\n\n\t\tpath = path.replace(/\\:(\\w+|\\*)(\\.)?/g) do |m,id,dot|\n\t\t\t# what about :id.:format?\n\t\t\tdynamic = yes\n\t\t\tgroups.push(id) unless id == '*'\n\t\t\tif dot\n\t\t\t\treturn \"([^\\/\\#\\.\\?]+)\\.\"\n\t\t\telse\n\t\t\t\treturn \"([^\\/\\#\\?]+)\"\n\t\t\n\t\tif path == '' and query\n\t\t\treturn\n\t\t\t\n\t\tpath = '^' + path\n\t\tlet end = path[path.length - 1]\n\t\tif end == '$'\n\t\t\tpath = path.slice(0,-1) + '(?=\\/?[\\#\\?]|\\/?$)'\n\n\t\tif (end != '/' and end != '$' and path != '^/')\n\t\t\tpath = path + '(?=[\\/\\#\\?]|$)'\n\n\t\tregex = new RegExp(path)\n\n\t\tself\n\n\tdef match str = router.path\n\t\tlet up = parent.match(str)\n\t\treturn null unless up\n\t\tlet url = parseUrl(str)\t\t\n\t\tlet matcher = url.url\n\t\tlet prefix = ''\n\n\t\tif up.path and url.path.indexOf(up.path) == 0\n\t\t\tprefix = up.path + '/'\n\t\t\tmatcher = matcher.slice(prefix.length)\n\n\t\t# try to match our part of the path with regex\n\t\tif let match = (regex ? matcher.match(regex) : [''])\n\t\t\tlet fullpath = prefix + match[0]\n\t\t\tlet matchid = [$path]\n\t\t\tlet params = {}\n\t\t\t\n\t\t\tif groups.length\n\t\t\t\tfor item,i in match\n\t\t\t\t\tif let name = groups[i - 1]\n\t\t\t\t\t\tparams[name] = item\n\t\t\t\t\t\tmatchid.push(item)\n\t\t\t\n\t\t\tif query\n\t\t\t\tfor own k,v of query\n\t\t\t\t\tlet name = k\n\t\t\t\t\tlet m = url.query..get(k)\n\n\t\t\t\t\tif v === false\n\t\t\t\t\t\treturn null\tif m\n\t\t\t\t\t\tmatchid.push('1')\n\t\t\t\t\t\tcontinue\n\t\t\t\t\t\n\t\t\t\t\tif v[0] == ':'\n\t\t\t\t\t\tname = v.slice(1)\n\t\t\t\t\t\tv = true\n\n\t\t\t\t\tif (v == true and m) or v == m\n\t\t\t\t\t\tparams[name] = m\n\t\t\t\t\t\tmatchid.push(m)\n\t\t\t\t\telse\n\t\t\t\t\t\treturn null\n\n\t\t\tlet key = matchid.join(\"*\")\n\t\t\tparams = (#matches[key] ||= params)\n\t\t\tlet result = combinedDeepMatch(up,params)\n\t\t\tresult.path = fullpath\n\t\t\treturn result\n\n\t\treturn null\n\n\n\tdef resolve url = router.path\n\t\treturn raw.replace(/\\$/g,'') if raw[0] == '/' and !dynamic\n\n\t\tlet up = parent.match(url)\n\t\tlet upres = parent.resolve(url)\n\t\tlet out\n\n\t\tif dynamic\n\t\t\tlet m = match(url)\n\t\t\tif m\n\t\t\t\treturn m.path\n\t\t\telse\n\t\t\t\treturn null\n\n\t\tif raw[0] == '?'\n\t\t\tout = (upres or '/') + raw\n\t\telse\n\t\t\tout = upres + '/' + raw\n\n\t\treturn out.replace(/\\$/g,'').replace(/\\/\\/+/g,'/')", "import {emit,listen,once,unlisten} from './utils'\n\nexport class Queue < Set\n\tconstructor\n\t\tsuper()\n\t\t#idler = Promise.resolve(this)\n\t\n\tdef emit name, ...params do emit(self,name,params)\n\tdef on name, ...params do listen(self,name,...params)\n\tdef once name, ...params do once(self,name,...params)\n\tdef un name, ...params do unlisten(self,name,...params)\n\n\tdef add value\n\t\tif value isa Function\n\t\t\tvalue = value()\n\n\t\tunless has(value)\n\t\t\tvalue.then do self.delete(value)\n\t\t\tlet first = size == 0\n\t\t\tsuper(value)\n\t\t\tif first\n\t\t\t\t#idler = #resolve = null\n\t\t\t\tself.emit('busy',self)\n\t\treturn value\n\n\tdef delete value\n\t\tif super(value)\n\t\t\tif size == 0\n\t\t\t\tif #resolve\n\t\t\t\t\t#resolve(self)\n\t\t\t\t\t#resolve = null\n\t\t\t\tself.emit('idle',self)\n\t\t\treturn true\n\t\treturn false\n\n\tget idle\n\t\t#idler ||= new Promise do(resolve)\n\t\t\t#resolve = resolve", "import 'imba/preflight.css'\n\nglobal css @root\n\tscroll-behavior:smooth\n\nlet routes = [\n\tname: 'home'\n\turl: '/home',\n\t---\n\tname: \"tawaffa\"\n\turl: \"/tawaffa\"\n\t]\n\nlet quotes = [\n\tsurahname: \"al-M\u0101'idah\"\n\tnumber: \"3:55\"\n\ttitle: \"mu[tawaff]ika\"\n\tarabic: \"\u0625\u0650\u0630\u0652  \u0642\u064E\u0627\u0644\u064E  \u0671\u0644\u0644\u064E\u0651\u0640\u0647\u064F  \u064A\u064E\u0670\u0639\u0650\u064A\u0633\u064E\u0649\u0670\u0653  \u0625\u0650\u0646\u0650\u0651\u0649  \u0645\u064F\u062A\u064E\u0648\u064E\u0641\u0650\u0651\u064A\u0643\u064E  \u0648\u064E\u0631\u064E\u0627\u0641\u0650\u0639\u064F\u0643\u064E  \u0625\u0650\u0644\u064E\u0649\u064E\u0651  \u0648\u064E\u0645\u064F\u0637\u064E\u0647\u0650\u0651\u0631\u064F\u0643\u064E  \u0645\u0650\u0646\u064E  \u0671\u0644\u064E\u0651\u0630\u0650\u064A\u0646\u064E  \u0643\u064E\u0641\u064E\u0631\u064F\u0648\u0627\u06DF  \u0648\u064E\u062C\u064E\u0627\u0639\u0650\u0644\u064F  \u0671\u0644\u064E\u0651\u0630\u0650\u064A\u0646\u064E  \u0671\u062A\u064E\u0651\u0628\u064E\u0639\u064F\u0648\u0643\u064E  \u0641\u064E\u0648\u0652\u0642\u064E  \u0671\u0644\u064E\u0651\u0630\u0650\u064A\u0646\u064E  \u0643\u064E\u0641\u064E\u0631\u064F\u0648\u0653\u0627\u06DF  \u0625\u0650\u0644\u064E\u0649\u0670  \u064A\u064E\u0648\u0652\u0645\u0650  \u0671\u0644\u0652\u0642\u0650\u064A\u064E\u0670\u0645\u064E\u0629\u0650  \u062B\u064F\u0645\u064E\u0651  \u0625\u0650\u0644\u064E\u0649\u064E\u0651  \u0645\u064E\u0631\u0652\u062C\u0650\u0639\u064F\u0643\u064F\u0645\u0652  \u0641\u064E\u0623\u064E\u062D\u0652\u0643\u064F\u0645\u064F  \u0628\u064E\u064A\u0652\u0646\u064E\u0643\u064F\u0645\u0652  \u0641\u0650\u064A\u0645\u064E\u0627  \u0643\u064F\u0646\u062A\u064F\u0645\u0652  \u0641\u0650\u064A\u0647\u0650  \u062A\u064E\u062E\u0652\u062A\u064E\u0644\u0650\u0641\u064F\u0648\u0646\u064E \"\n\tphonetic: \"idh qal\u0101 all\u0101hu y\u0101\u2011\u02BF\u012Bs\u0101 inn\u012B mutawaff\u012Bka wa\u2011r\u0101fi\u02BFuka ilayya wa\u2011mu\u1E6Dahhiruka mina lladh\u012Bna kafar\u016B wa\u2011j\u0101\u02BFilu lladh\u012Bna ttaba\u02BF\u016Bka fawqa lladh\u012Bna kafar\u016B il\u0101 yawmi l\u2011qiy\u0101mati thumma ilayya marji\u02BFukum fa\u2011a\u1E25kumu baynakum f\u012B\u2011m\u0101 kuntum f\u012Bhi takhtalif\u016Bna\"\n\tmarked: 6\n\ttranslations: [\n\t\ttext: \"Lo! God said: O Jesus! Verily, I shall cause thee to die, and shall exalt thee unto Me, and cleanse thee of [the presence of] those who are bent on denying the truth; and I shall place those who follow thee [far] above those who are bent on denying the truth, unto the Day of Resurrection. In the end, unto Me you all must return, and I shall judge between you with regard to all on which you were wont to differ.\"\n\t\tmark-start: 7\n\t\tmark-end: 12\n\t\tversion: \"Muhammad Asad\"\n\t\tkhmer: false\n\t\t---\n\t\ttext: \"\u17A0\u17BE\u1799\u1793\u17C5\u1796\u17C1\u179B\u178A\u17C2\u179B\u17A2\u179B\u17CB\u17A1\u17C4\u17C7\u1790\u17B6\u17B1\u17A2\u17CA\u17B8\u179F\u17B6! \u1780\u17B6\u179A\u1796\u17B7\u178F\u1799\u17BE\u1784\u1787\u17B6\u17A2\u17D2\u1793\u1780\u1794\u1789\u17D2\u1785\u1794\u17CB\u17A2\u17D2\u1793\u1780 \u1787\u17B6\u17A2\u17D2\u1793\u1780\u179B\u17BE\u1780\u178F\u1798\u17D2\u179B\u17BE\u1784\u17A2\u17D2\u1793\u1780\u1791\u17C5\u1780\u17B6\u1793\u17CB\u1799\u17BE\u1784\u1787\u17B6\u17A2\u17D2\u1793\u1780\u178A\u17C2\u179B \u1787\u1798\u17D2\u179A\u17C7\u179F\u17C6\u17A2\u17B6\u178F\u17A2\u17D2\u1793\u1780\u1796\u17B8\u1796\u17BD\u1780\u178A\u17C2\u179B\u17A2\u1787\u17C6\u1793\u17BF \u1793\u17B7\u1784\u1787\u17B6\u17A2\u17D2\u1793\u1780\u1792\u17D2\u179C\u17BE\u17B1\u17D2\u1799\u1796\u17BD\u1780\u178A\u17C2\u179B\u1794\u17B6\u1793\u1794\u17D2\u179A\u178F\u17B7\u1794\u178F\u17D2\u178F\u17B7\u178F\u17B6\u1798\u17A2\u17D2\u1793\u1780 \u1781\u17D2\u1796\u1784\u17CB\u1781\u17D2\u1796\u179F\u17CB\u1787\u17B6\u1784\u1796\u17BD\u1780\u178A\u17C2\u179B\u17A2\u1787\u17C6\u1793\u17BF\u179A\u17A0\u17BC\u178F\u178A\u179B\u17CB\u1790\u17D2\u1784\u17C3\u1794\u179A\u179B\u17C4\u1780\u17D4 \u1780\u17D2\u179A\u17C4\u1799\u1798\u1780\u1786\u17D2\u1796\u17C4\u17C7\u1791\u17C5\u1799\u17BE\u1784\u1791\u17B8\u179C\u17B7\u179B\u178F\u17D2\u179A\u17A1\u1794\u17CB\u1796\u17BD\u1780\u17A2\u17D2\u1793\u1780 \u179A\u17BD\u1785\u1798\u1780\u1799\u17BE\u1784\u1793\u17B9\u1784\u179F\u1798\u17D2\u179A\u17C1\u1785\u1780\u17D2\u178F\u17B8\u179A\u179C\u17B6\u1784\u1796\u17BD\u1780\u17A2\u17D2\u1793\u1780\u1796\u17B8\u17A2\u17D2\u179C\u17B8\u178A\u17C2\u179B\u1796\u17BD\u1780\u17A2\u17D2\u1793\u1780\u1792\u17D2\u179B\u17B6\u1794\u17CB\u1791\u17B6\u179F\u17CB\u1791\u17C2\u1784\"\n\t\tmark-start: 2\n\t\tmark-end: 2\n\t\tversion: \"Khmer\"\n\t\tkhmer: true\n\t]\n\t---\n\tsurahname: \"?\"\n\tnumber: \"5:118\"\n\ttitle: \"[Tawaffa]ytan\u012B\"\n\tarabic: \"\u0645\u064E\u0627  \u0642\u064F\u0644\u0652\u062A\u064F  \u0644\u064E\u0647\u064F\u0645\u0652  \u0625\u0650\u0644\u064E\u0651\u0627  \u0645\u064E\u0622  \u0623\u064E\u0645\u064E\u0631\u0652\u062A\u064E\u0646\u0650\u0649  \u0628\u0650\u0647\u0650\u06E6\u0653  \u0623\u064E\u0646\u0650  \u0671\u0639\u0652\u0628\u064F\u062F\u064F\u0648\u0627\u06DF  \u0671\u0644\u0644\u064E\u0651\u0640\u0647\u064E  \u0631\u064E\u0628\u0650\u0651\u0649  \u0648\u064E\u0631\u064E\u0628\u064E\u0651\u0643\u064F\u0645\u0652  \u0648\u064E\u0643\u064F\u0646\u062A\u064F  \u0639\u064E\u0644\u064E\u064A\u0652\u0647\u0650\u0645\u0652  \u0634\u064E\u0647\u0650\u064A\u062F\u064B\u0627  \u0645\u064E\u0651\u0627  \u062F\u064F\u0645\u0652\u062A\u064F  \u0641\u0650\u064A\u0647\u0650\u0645\u0652  \u0641\u064E\u0644\u064E\u0645\u064E\u0651\u0627  \u062A\u064E\u0648\u064E\u0641\u064E\u0651\u064A\u0652\u062A\u064E\u0646\u0650\u0649  \u0643\u064F\u0646\u062A\u064E  \u0623\u064E\u0646\u062A\u064E  \u0671\u0644\u0631\u064E\u0651\u0642\u0650\u064A\u0628\u064E  \u0639\u064E\u0644\u064E\u064A\u0652\u0647\u0650\u0645\u0652  \u0648\u064E\u0623\u064E\u0646\u062A\u064E  \u0639\u064E\u0644\u064E\u0649\u0670  \u0643\u064F\u0644\u0650\u0651  \u0634\u064E\u0649\u0652\u0621\u064D  \u0634\u064E\u0647\u0650\u064A\u062F\u064C \"\n\tphonetic: \"m\u0101 qultu lahum ill\u0101 m\u0101 amartan\u012B bihi ani i\u02BFbud\u016B all\u0101ha rabb\u012B wa\u2011rabbakum wa\u2011kuntu \u02BFalayhim shah\u012Bdan m\u0101 dumtu f\u012Bhim fa\u2011lamm\u0101 tawaffaytan\u012B kunta anta l\u2011raq\u012Bba \u02BFalayhim waanta \u02BFal\u0101 kulli shay\u02BEin shah\u012Bdun\"\n\tmarked: 20\n\ttranslations: [\n\t\ttext: \"I [Jesus] did not say to them aught save what Thou didst enjoin me with: That serve Allah, my Lord and your Lord, and I was a witness of them so long as I was among them, but when Thou didst cause me to die , Thou wert the watcher over them, and Thou art witness of all things.\"\n\t\tmark-start: 40\n\t\tmark-end: 45\n\t\tversion: \"Shakir\"\n\t\tkhmer: false\n\t\t---\n\t\ttext: \"\u1789\u17BB\u17C6\u1798\u17B7\u1793\u1794\u17B6\u1793\u1793\u17B7\u1799\u17B6\u1799\u1791\u17C5\u1796\u17BD\u1780\u1782\u17C1 \u1780\u17D2\u179A\u17C5\u1796\u17B8\u17A2\u17D2\u179C\u17B8\u178A\u17C2\u179B\u179B\u17C4\u1780\u1794\u17B6\u1793\u1794\u1789\u17D2\u1787\u17B6\u1798\u1780\u1781\u17D2\u1789\u17BB\u17C6\u1793\u17C4\u17C7\u17A1\u17BE\u1799 \u1782\u17BA \u1785\u17BC\u179A\u1796\u17BD\u1780\u17A2\u17D2\u1793\u1780\u1782\u17C4\u179A\u1796\u1794\u17D2\u179A\u178E\u17B7\u1794\u17D0\u178F\u1793\u17CD\u17A2\u179B\u17CB\u17A1\u17C4\u17C7\u1787\u17B6\u1798\u17D2\u1785\u17B6\u179F\u17CB\u1799\u17BE\u1784 \u1793\u17B7\u1784\u1798\u17D2\u1785\u17B6\u179F\u17CB\u1796\u17BD\u1780\u17A2\u17D2\u1793\u1780\u17D4 \u17A0\u17BE\u1799\u1781\u17D2\u1789\u17BB\u17C6\u1787\u17B6 \u179F\u17B6\u1780\u17D2\u179F\u17B8\u179B\u17BE\u1796\u17BD\u1780\u1782\u17C1 \u178A\u179A\u17B6\u1794\u178E\u17B6\u1781\u17D2\u1789\u17BB\u17C6\u1793\u17C5\u1780\u17D2\u1793\u17BB\u1784\u1785\u17C6\u178E\u17C4\u1798\u1796\u17BD\u1780\u1782\u17C1\u17D4 \u1793\u17C5\u1796\u17C1\u179B\u178A\u17C2\u179B \u179B\u17C4\u1780\u1794\u1789\u17D2\u1785\u1794\u17CB \u1787\u17B8\u179C\u17B7\u178F\u1781\u17D2\u1789\u17BB\u17C6 \u179B\u17C4\u1780\u1794\u1789\u17D2\u1785\u1794\u17CB \u1787\u17B8\u179C\u17B7\u178F\u1781\u17D2\u1789\u17BB\u17C6 \u179B\u17C4\u1780\u1787\u17B6\u17A2\u17D2\u1793\u1780\u178F\u17B6\u1798\u1783\u17D2\u179B\u17B6\u17C6\u1798\u17BE\u179B\u1796\u17BD\u1780\u1782\u17C1\u17D4 \u17A0\u17BE\u1799\u179B\u17C4\u1780\u1787\u17B6\u179F\u17B6\u1780\u17D2\u179F\u17B8\u179B\u17BE\u17A2\u17D2\u179C\u17B8\u17D7\u1791\u17B6\u17C6\u1784\u17A2\u179F\u17CB\"\n\t\tmark-start: 10\n\t\tmark-end: 11\n\t\tversion: \"Khmer\"\n\t\tkhmer: true\n\t]\n\t---\n\tname: \"al-Baqara\"\n\tnumber: \"2:234\"\n\ttitle: \"Yu[tawaffa]wna\"\n\tarabic: \"\u0648\u064E\u0671\u0644\u0651\u064E\u0630\u0650\u064A\u0646\u064E  \u064A\u064F\u062A\u064E\u0648\u064E\u0641\u0651\u064E\u0648\u0652\u0646\u064E  \u0645\u0650\u0646\u0643\u064F\u0645\u0652  \u0648\u064E\u064A\u064E\u0630\u064E\u0631\u064F\u0648\u0646\u064E  \u0623\u064E\u0632\u0652\u0648\u064E\u0670\u062C\u064B\u0627  \u064A\u064E\u062A\u064E\u0631\u064E\u0628\u0651\u064E\u0635\u0652\u0646\u064E  \u0628\u0650\u0623\u064E\u0646\u0641\u064F\u0633\u0650\u0647\u0650\u0646\u0651\u064E  \u0623\u064E\u0631\u0652\u0628\u064E\u0639\u064E\u0629\u064E  \u0623\u064E\u0634\u0652\u0647\u064F\u0631\u064D  \u0648\u064E\u0639\u064E\u0634\u0652\u0631\u064B\u0627  \u0641\u064E\u0625\u0650\u0630\u064E\u0627  \u0628\u064E\u0644\u064E\u063A\u0652\u0646\u064E  \u0623\u064E\u062C\u064E\u0644\u064E\u0647\u064F\u0646\u0651\u064E  \u0641\u064E\u0644\u064E\u0627  \u062C\u064F\u0646\u064E\u0627\u062D\u064E  \u0639\u064E\u0644\u064E\u064A\u0652\u0643\u064F\u0645\u0652  \u0641\u0650\u064A\u0645\u064E\u0627  \u0641\u064E\u0639\u064E\u0644\u0652\u0646\u064E  \u0641\u0650\u0649\u0653  \u0623\u064E\u0646\u0641\u064F\u0633\u0650\u0647\u0650\u0646\u0651\u064E  \u0628\u0650\u0671\u0644\u0652\u0645\u064E\u0639\u0652\u0631\u064F\u0648\u0641\u0650  \u0648\u064E\u0671\u0644\u0644\u064E\u0651\u0640\u0647\u064F  \u0628\u0650\u0645\u064E\u0627  \u062A\u064E\u0639\u0652\u0645\u064E\u0644\u064F\u0648\u0646\u064E  \u062E\u064E\u0628\u0650\u064A\u0631\u064C\t\"\n\tphonetic: \"wa\u2011lladh\u012Bna yutawaffawna minkum wa\u2011yadhar\u016Bna azw\u0101jan yatarabba\u1E63na bi\u2011anfusihinna arba\u02BFata ashhurin wa\u2011\u02BFashran fa\u2011idh\u0101 balaghna ajalahunna fa\u2011l\u0101 jun\u0101\u1E25a \u02BFalaykum f\u012B\u2011m\u0101 fa\u02BFalna f\u012B anfusihinna bil\u2011ma\u02BFr\u016Bfi wall\u0101hu bi\u2011m\u0101 ta\u02BFmal\u016Bna khab\u012Brun\"\n\tmarked: 2\n\ttranslations: [\n\t\ttext: \"If any of you die and leave widows behind, they shall wait concerning themselves four months and ten days: When they have fulfilled their term, there is no blame on you if they dispose of themselves in a just and reasonable manner. And Allah is well acquainted with what ye do.\"\n\t\tmark-start: 5\n\t\tmark-end: 5\n\t\tversion: \"Yusuf Ali\"\n\t\tkhmer: false\n\t\t---\n\t\ttext: \"\u17A0\u17BE\u1799\u1796\u17BD\u1780\u178A\u17C2\u179B \u179F\u17D2\u179B\u17B6\u1794\u17CB \u1780\u17D2\u1793\u17BB\u1784\u1785\u17C6\u178E\u17C4\u1798\u1796\u17BD\u1780\u17A2\u17D2\u1793\u1780 \u178A\u17C4\u1799\u1794\u1793\u17D2\u179F\u179B\u17CB\u1791\u17BB\u17CB\u1780\u1793\u17BC\u179C\u1797\u179A\u17B7\u1799\u17B6\u1796\u17BD\u1780\u1793\u17B6\u1784\u178F\u17D2\u179A\u17BD\u179C\u179A\u1784\u17CB\u1785\u17B6\u17C6\u178A\u17C4\u1799\u1781\u17D2\u179B\u17BD\u1793\u17AF\u1784\u179A\u1799\u17C8\u1796\u17C1\u179B\u1794\u17BD\u1793\u1781\u17C2\u1793\u17B7\u1784\u178A\u1794\u17CB\u1790\u17D2\u1784\u17C3\u17D4 \u1780\u17B6\u179B\u178E\u17B6\u1796\u17BD\u1780\u1793\u17B6\u1784\u1794\u17B6\u1793 \u1785\u17BC\u179B\u178A\u179B\u17CB\u1796\u17C1\u179B\u1780\u17C6\u178E\u178F\u17CB\u179A\u1794\u179F\u17CB\u1796\u17BD\u1780\u1793\u17B6\u1784\u17A0\u17BE\u1799 \u1796\u17C1\u179B\u1793\u17C4\u17C7 \u1782\u17D2\u1798\u17B6\u1793\u1791\u17C4\u179F\u1796\u17C3\u179A\u17CD\u1791\u17C1\u179B\u17BE\u1796\u17BD\u1780\u17A2\u17D2\u1793\u1780\u1780\u17D2\u1793\u17BB\u1784\u17A2\u17D2\u179C\u17B8\u178A\u17C2\u179B\u1796\u17BD\u1780\u1793\u17B6\u1784\u1794\u17B6\u1793\u1792\u17D2\u179C\u17BE\u179B\u17BE\u1781\u17D2\u179B\u17BD\u1793\u1796\u17BD\u1780\u1793\u17B6\u1784\u1795\u17D2\u1791\u17B6\u179B\u17CB\u178A\u17C4\u1799\u179F\u1798\u179A\u1798\u17D2\u1799\u17D4 \u17A0\u17BE\u1799\u17A2\u179B\u17CB\u17A1\u17C4\u17C7\u1787\u17B6\u17A2\u17D2\u1793\u1780\u178A\u17B9\u1784\u1787\u17D2\u179A\u17B6\u1794\u1794\u17C6\u1795\u17BB\u178F\u1793\u17BC\u179C\u17A2\u17D2\u179C\u17B8\u178A\u17C2\u179B\u1796\u17BD\u1780\u17A2\u17D2\u1793\u1780\u1794\u17B6\u1793\u1794\u17D2\u179A\u1796\u17D2\u179A\u17B9\u178F\u17D2\u178F\"\n\t\tmark-start: 2\n\t\tmark-end: 2\n\t\tversion: \"Khmer\"\n\t\tkhmer: true\n\t]\t\t\n\t---\n\tname: \"?\"\n\tnumber: \"2:240\"\n\ttitle: \"Yu[tawaffa]wna\"\n\tarabic: \"\"\n\tphonetic: \"\"\n\tmarked: 2\n\ttranslations: [\n\t\ttext: \"Those of you who die and leave widows should bequeath for their widows a year's maintenance and residence; but if they leave (The residence), there is no blame on you for what they do with themselves, provided it is reasonable. And Allah is Exalted in Power, Wise.\"\n\t\tmark-start: 5\n\t\tmark-end: 5\n\t\tversion: \"Yusuf Ali\"\n\t\tkhmer: false\n\t\t---\n\t\ttext: \"\u1793\u17B7\u1784\u1796\u17BD\u1780\u178A\u17C2\u179B\u1793\u17B9\u1784 \u179F\u17D2\u179B\u17B6\u1794\u17CB  \u1780\u17D2\u1793\u17BB\u1784\u1785\u17C6\u178E\u17C4\u1798\u1796\u17BD\u1780\u17A2\u17D2\u1793\u1780\u17A0\u17BE\u1799\u1794\u17B6\u1793\u1794\u1793\u17D2\u179F\u179B\u17CB\u1791\u17BB\u1780\u1797\u179A\u17B7\u1799\u17B6 \u178F\u17D2\u179A\u17BC\u179C\u1795\u17D2\u178F\u17C2\u1795\u17D2\u178F\u17B6\u17C6\u1798\u17BD\u1799\u1785\u17C6\u1796\u17C4\u17C7\u1797\u179A\u17B7\u1799\u17B6\u179A\u1794\u179F\u17CB\u1796\u17BD\u1780\u1782\u17C1\u1787\u17B6\u1780\u17B6\u179A\u179F\u17C4\u1798\u1793\u179F\u17D2\u179F\u1798\u17BD\u1799 \u179A\u17A0\u17BC\u178F\u178A\u179B\u17CB\u1798\u17BD\u1799\u1786\u17D2\u1793\u17B6\u17C6\u178A\u17C4\u1799\u1782\u17D2\u1798\u17B6\u1793\u1780\u17B6\u179A\u1794\u178E\u17D2\u178F\u17C1\u1789\u17D4 \u179A\u17BD\u1785\u1794\u17BE\u1796\u17BD\u1780\u1793\u17B6\u1784\u1794\u17B6\u1793\u1785\u17C1\u1789 \u1780\u17CF\u1782\u17D2\u1798\u17B6\u1793\u1791\u17C4\u179F\u1796\u17C3\u179A\u17CD\u179B\u17BE\u1796\u17BD\u1780\u17A2\u17D2\u1793\u1780\u178A\u17C2\u179A \u1780\u17D2\u1793\u17BB\u1784\u17A2\u17D2\u179C\u17B8\u178A\u17C2\u179B\u1796\u17BD\u1780\u1793\u17B6\u1784\u1794\u17B6\u1793\u1792\u17D2\u179C\u17BE\u1780\u17D2\u1793\u17BB\u1784\u1781\u17D2\u179B\u17BC\u1793\u17AF\u1784\u178A\u17C4\u1799\u179F\u1798\u179A\u1798\u17D2\u1799\u17D4 \u17A2\u179B\u17CB\u17A1\u17C4\u17C7\u1787\u17B6\u17A2\u17D2\u1793\u1780\u1798\u17B6\u1793\u17A2\u17B6\u1793\u17BB\u1797\u17B6\u1796\u1798\u17A0\u17B6\u1782\u178F\u17B7\u1794\u178E\u17D2\u178C\u17B7\u178F\"\n\t\tmark-start: 2\n\t\tmark-end: 2\n\t\tversion: \"Khmer\"\n\t\tkhmer: true\n\t]\n\t---\n\tname: \"?\"\n\tnumber: \"3:193\"\n\ttitle: \"wa\u2011[tawaffa]n\u0101\"\n\tarabic: \"\"\n\tphonetic: \"\"\n\tmarked: 18\n\ttranslations: [\n\t\tversion: \"Shakir\"\n\t\ttext: \"Our Lord! surely we have heard a preacher calling to the faith, saying: Believe in your Lord, so we did believe; Our Lord! forgive us therefore our faults, and cover our evil deeds and make us die with the righteous.\"\t\t\n\t\tmark-start: 35\n\t\tmark-end: 37\n\t\tkhmer: false\n\t\t---\n\t\tversion: \"Yusuf Ali\"\n\t\ttext: \"Our Lord! we have heard the call of one calling (Us) to Faith, 'Believe ye in the Lord,' and we have believed. Our Lord! Forgive us our sins, blot out from us our iniquities, and take to Thyself our souls in the company of the righteous.\"\n\t\tmark-start: 36\n\t\tmark-end: 40\n\t\tkhmer: false\n\t\t---\n\t\tversion: \"Khmer\"\n\t\ttext: \"\u17B1\u1798\u17D2\u1785\u17B6\u179F\u17CB\u1799\u17BE\u1784! \u1796\u17B7\u178F\u1794\u17D2\u179A\u17B6\u1780\u178A\u178E\u17B6\u179F\u17CB \u1799\u17BE\u1784\u1794\u17B6\u1793\u17AE\u17A2\u17D2\u1793\u1780\u178A\u17C2\u179B\u17A0\u17C5 \u1791\u17C5\u1780\u17B6\u1793\u17CB\u1787\u17C6\u1793\u17BF\u1790\u17B6 \u1785\u17BC\u179A\u1796\u17BD\u1780\u17A2\u17D2\u1793\u1780\u1787\u17BF\u1793\u17B9\u1784\u1798\u17D2\u1785\u17B6\u179F\u17CB\u179A\u1794\u179F\u17CB\u1796\u17BD\u1780\u17A2\u17D2\u1793\u1780\u17D4 \u1799\u17BE\u1784\u1780\u17CF\u1794\u17B6\u1793\u1787\u17BF\u17A0\u17BE\u1799\u17D4 \u17B1\u1798\u17D2\u1785\u17B6\u179F\u17CB\u179A\u1794\u179F\u17CB\u1799\u17BE\u1784! \u178A\u17BC\u1785\u1793\u17C1\u17C7 \u179F\u17BC\u1798\u179B\u17C4\u1780\u1794\u17D2\u179A\u17C4\u179F\u1794\u17D2\u179A\u178E\u17B8\u17B1\u17D2\u1799\u1796\u17BD\u1780\u1799\u17BE\u1784\u1795\u1784 \u1793\u17BC\u179C\u1780\u17C6\u17A0\u17BB\u179F\u1786\u17D2\u1782\u1784 \u1791\u17B6\u17C6\u1784\u17A1\u17B6\u1799\u179A\u1794\u179F\u17CB\u1796\u17BD\u1780\u1799\u17BE\u1784 \u17A0\u17BE\u1799\u179F\u17BC\u1798\u1798\u17C1\u178F\u17D2\u178F\u17B6\u179B\u17C4\u1780\u179B\u17BB\u1794\u1796\u17B8\u1799\u17BE\u1784\u1795\u1784 \u1793\u17BC\u179C\u17A2\u17C6\u1796\u17BE\u17A2\u17B6\u1780\u17D2\u179A\u1780\u17CB \u1791\u17B6\u17C6\u1784\u17A1\u17B6\u1799\u179A\u1794\u179F\u17CB\u1799\u17BE\u1784\u17D4 \u1794\u1789\u17D2\u1785\u1794\u17CB\u1787\u17B8\u179C\u17B7\u178F \u179A\u1794\u179F\u17CB\u1796\u17BD\u1780\u1799\u17BE\u1784 \u1787\u17B6\u1798\u17BD\u1799 \u1793\u17B9\u1784\u1796\u17BD\u1780\u17A2\u17D2\u1793\u1780\u179F\u17B6\u1784\u17A2\u17C6\u1796\u17BE\u179B\u17D2\u17A2\u1795\u1784\"\n\t\tmark-start: 15\n\t\tmark-end: 16\n\t\tkhmer: true\n\t]\n\t---\n\tname: \"\"\n\tnumber: \"12:101\"\n\ttitle: \"[tawaffa]n\u012B\"\n\tarabic: \"\"\n\tphonetic: \"\"\n\tmarked: 18\n\ttranslations: [\n\t\ttext: \"My Lord! Thou hast given me of the kingdom and taught me of the interpretation of sayings: Originator of the heavens and the earth! Thou art my guardian in this world and the hereafter make me die a muslim and join me with the good.\"\n\t\tmark-start: 35\n\t\tmark-end: 39\n\t\tversion: \"Yusuf Ali\"\n\t\tkhmer: false\n\t\t---\n\t\ttext: \"\u17B1\u1798\u17D2\u1785\u17B6\u179F\u17CB\u179A\u1794\u179F\u17CB\u1781\u17D2\u1789\u17BB\u17C6! \u179B\u17C4\u1780\u1794\u17B6\u1793\u1795\u17D2\u178F\u179B\u17CB\u17B1\u17D2\u1799\u1781\u17D2\u1789\u17BB\u17C6\u1799\u17C9\u17B6\u1784\u1794\u17D2\u179A\u17B6\u1780\u178A \u1793\u17BC\u179C\u1797\u17B6\u1782\u1781\u17D2\u179B\u17C7\u1793\u17C3 \u179A\u17B6\u1787\u17B6\u1792\u17B7\u1794\u178F\u17C1\u1799\u17D2\u1799\u17B1\u17D2\u1799 \u17A0\u17BE\u1799\u179B\u17C4\u1780\u1794\u17B6\u1793\u1794\u1784\u17D2\u179A\u17C0\u1793\u1781\u17D2\u1789\u17BB\u17C6\u1797\u17B6\u1782\u1781\u17D2\u179B\u17C7 \u1793\u17C3\u1780\u17B6\u179A\u1780\u17B6\u178F\u17CB\u179F\u17BB\u1794\u17B7\u1793\u1791\u17B6\u17C6\u1784\u17A1\u17B6\u1799 \u17D4 \u17B1\u17A2\u17D2\u1793\u1780 \u178A\u17C2\u179B\u1794\u1784\u17D2\u1780\u17BE\u178F\u1797\u1796\u1798\u17C1\u1783\u1791\u17B6\u17C6\u1784\u17A1\u17B6\u1799 \u1793\u17B7\u1784\u1797\u1796\u1795\u17C2\u1793\u178A\u17B8 \u179B\u17C4\u1780\u1787\u17B6\u17A2\u17D2\u1793\u1780\u1782\u17B6\u17C6\u1796\u17B6\u179A\u1781\u17D2\u1789\u17BB\u17C6 \u1780\u17D2\u1793\u17BB\u1784\u179B\u17C4\u1780\u1794\u1785\u17D2\u1785\u17BB\u1794\u17D2\u1794\u1793\u17D2\u1793 \u1793\u17B7\u1784\u179B\u17C4\u1780\u1781\u17B6\u1784\u1798\u17BB\u1781 \u1794\u1789\u17D2\u1785\u1794\u17CB\u1787\u17B8\u179C\u17B7\u178F\u1781\u17D2\u1789\u17BB\u17C6 \u178A\u17C4\u1799\u1794\u17D2\u179A\u178F\u17B7\u1794\u178F\u17D2\u178F\u17B7\u1795\u1784 \u17A0\u17BE\u1799\u179F\u17BC\u1798 \u179B\u17C4\u1780\u1797\u17D2\u1787\u17B6\u1794\u17CB \u1781\u17D2\u1789\u17BB\u17C6\u1793\u17B9\u1784\u1796\u17BD\u1780\u178A\u17C2\u179B\u179F\u17B6\u1784\u1780\u17BB\u179F\u179B\u1795\u1784\"\n\t\tmark-start: 14\n\t\tmark-end: 15\n\t\tversion: \"Khmer\"\n\t\tkhmer: true\n\t\t]\n\t]\n\t\ntag quran-translation\n\tprop version = \"Version Name\"\n\tprop ref = \"3:55\"\n\tprop text = [\"one\", \"two\", \"three\"]\n\tprop markstart = 1\n\tprop markend = 3\n\tcss &\n\t\td:block\n\t\tpr:3\n\t\tbdr:7px solid emerald2 \n\t\tpb@not-last:3\n\t\t&.khmer\t>>> .text lh:2 fs:1.3em\n\tcss .wrapper \n\t\tbg:white bxs:md p:3 rd:lg\n\tcss .ref fw:bold ta:right c:emerald6\n\tcss .text ta:right\n\t\t.marked\n\t\t\tbg:emerald1 c:emerald9 cursor:none bdb@hover:5px solid emerald7\n\tcss .name ff:sans ta:right w:100% c:cooler5 ls:1\n\tdef render\n\t\t<self>\n\t\t\t<.wrapper>\n\t\t\t\t<.name[ta:right]>\n\t\t\t\t\tversion + \"Translation\"\n\t\t\t\t<.ref>\n\t\t\t\t\t\"{ref}\"\n\t\t\t\t<.text>\n\t\t\t\t\tfor word,i in text\n\t\t\t\t\t\t<span.marked=((i + 1) >= markstart and (i + 1) <= markend)> \"{word} \"\n\ntag quran-reference\n\tprop name\n\tprop number\n\tprop text\n\tprop marked\n\tprop title = \"Tawaffa\"\n\tdef pairUp arabic, phonetic\n\t\tlet one = arabic.split('  ')\n\t\tlet two = phonetic.split(' ')\n\t\tlet myArray = []\n\t\tfor word,i in one\n\t\t\tmyArray.push([word,two[i]])\n\t\treturn myArray\n\tdef render\n\t\t<self>\n\t\t\t<h2[ta:right c:emerald5 fw:bold mt:5 fs:10]> title\n\t\t\t<h2.reference> \"Surah {name}, {number}\"\n\t\t\t<div.quote dir=\"rtl\">\n\t\t\t\tfor item, i in text\n\t\t\t\t\t<span.word[d:flex fld:column py:3].marked=(i is marked - 1)>\n\t\t\t\t\t\t<div.arabic> item[0]\n\t\t\t\t\t\t<div.phonetic> item[1]\n\t\t\tfor translation in translations\n\t\t\t\t<quran-translation .khmer=translation.khmer version=translation.version ref=item.number text=translation.text.split(' ') markstart=translation.mark-start markend=translation.mark-end>\n\tcss &\n\t\t$arabic:emerald9\n\t\t$arabichover:rose5\n\t\t$accent:emerald5\n\t\t$hlbg: emerald1\n\t\t$hltext:emerald9 \n\t\t$accenthover:emerald6\n\t\t$hlbghover:emerald1\n\t\t$hltexthover:rose6\n\tcss .title\n\t\tfs:10 c:cooler4 p:4 bg:gray1 d:inline\n\tcss .reference\n\t\tta:right\n\t\tfw:bold\n\t\tc:cooler6\n\t\tff:mono\n\tcss .quote\n\t\td:flex flf:wrap\n\t\tpr:3\n\t\tbdr:7px solid $accent\n\t\tmt:1em\n\t\tpb:20px\n\tcss .word \n\t\trd:lg px:3\n\t\tmb:0\n\t\tfs@lt-sm:14px @sm:16px @md: 18px @xl:24px\n\t\t.arabic fs:2em c:cooler7\n\t\t.phonetic fs:.7em ta:center us:none ff:mono c:cooler6\n\t\t@hover\n\t\t\tbg:emerald1\n\t\t\trd:lg\n\t\t\tcursor:none\n\t\t\t.arabic c:emerald9\n\t\t\t.phonetic c:emerald8\n\t\t&.marked\n\t\t\tbg:emerald1 @hover: emerald1\n\t\t\tc:emerald6 @hover:emerald9\n\ntag nav-global\n\tprop path\n\tcss nav\n\t\tw:100%\n\t\tbg:emerald0\n\t\td:flex \n\t\tjc:space-evenly ai:center\n\t\ta\n\t\t\th:60px \n\t\t\tlist-style-type:none\n\t\t\tai:center jc:center\n\t\t\td:flex\n\t\t\tfl:1\n\t\t\t&@hover bg:emerald1\n\tdef render\n\t\tpath = imba.router.url.pathname\n\t\t<self>\n\t\t\t<nav>\n\t\t\t\tfor link in routes\n\t\t\t\t\t<a[cursor:pointer] route-to=link.url> link.name\n\ntag nav-tawaffa < nav\n\tprop fixed = false\n\tcss &\n\t\td:flex fld:column\n\t\tw:120px\n\t\ta p:3 c:emerald0\n\t\t\tbg:emerald8 @hover:emerald7\n\tdef onScroll\n\t\treturn true\n\tdef render\n\t\t<self>\n\t\t\t<a href=\"#\" router-ignore> \"Top\"\n\t\t\t<a href=\"#s3-55\" router-ignore> \"Surah 3:55\"\n\t\t\t<a href=\"#s5-118\" router-ignore> \"Surah 5:118\"\n\t\t\t<a href=\"#s2-234\" router-ignore> \"Surah 2:234\"\n\t\t\t<a href=\"#s2-240\" router-ignore> \"Surah 2:240\"\n\t\t\t<a href=\"#s3-193\" router-ignore> \"Surah 3:193\"\n\t\t\t<a href=\"#s12-101\" router-ignore> \"Surah 12:101\"\n\t\t\t\ntag page-tawaffa\n\tdef pairUp arabic, phonetic\n\t\tlet one = arabic.split('  ')\n\t\tlet two = phonetic.split(' ')\n\t\tlet myArray = []\n\t\tfor word,i in one\n\t\t\tmyArray.push([word,two[i]])\n\t\treturn myArray\n\tdef render\n\t\t<self>\n\t\t\t<h1.title> \"The word [Tawaffa]\"\n\t\t\t\tcss fs:13 ta:center c:emerald1 ff:monospace fw:100 bg:emerald9 py:5\n\t\t\t<section[d:flex fld:column px:5]>\n\t\t\t\t# <nav-tawaffa>\n\t\t\t\t# <div[fl: 1 0 120px bg:emerald9]>\n\t\t\t\tfor item in quotes\n\t\t\t\t\t<quran-reference item=item title=item.title name=item.surahname number=item.number text=pairUp(item.arabic,item.phonetic) marked=item.marked translations=item.translations>\n\ntag page-404\n\tcss a fs:15 d:block p:4 ta:center bg:warmer1 @hover:rose9 c:rose9 @hover:rose0 h:100vh\n\tdef render\n\t\t<self>\n\t\t\t<a href=\"/home\"> \"Wrong page. go home!\"\n\ntag page-home\n\tcss & py:4 d:block ta:center\n\tdef render\n\t\t<self>\n\t\t\t<h1[ta:center]> \"Articles\"\n\t\t\t<a href=\"/tawaffa\" route-to=\"/tawaffa\"> \"Tawaffana\"\n\ntag offset-nav-wrapper\n\tcss & \n\t\td:flex\n\t\tmin-height: 100vh\n\t\tw: calc(100% + 300px)\n\t\tml:-300px .active:0\n\t\ttransition: margin 1000ms cubic-in-out\n\tcss >>> side-bar\n\t\tmin-height:100% bg:emerald9\n\t\tc:emerald0 py:3\n\t\td:flex fld:column\n\t\tfl:0 0 300px\n\t\ta px:2 py:2 bg@hover:emerald8\n\tcss & >>> main\n\t\tfl: 1 0\n\t\tpb:4em\n\tcss button\n\t\tpos:absolute \n\t\tl:0px \n\t\tl.active:300px \n\t\ttween: left 1000ms cubic-in-out\n\t\tpos:fixed\n\t\tus:none\n\t\tb:100px \n\t\tbg:emerald9 c:white\n\t\toverflow:hidden \n\t\toutline: none \n\t\trdr:full \n\t\tpy:3 px:4 \n\t\tcursor:pointer \n\t\t# us:none\n\tprop active = false\n\tdef toggleNav\n\t\tactive = !active\n\tdef render\n\t\t<self .active=active>\n\t\t\t<slot name=\"navbar\">\n\t\t\t<slot name=\"content\">\n\t\t\t<slot>\n\t\t\t<button.active=active @click.toggleNav> \"NAV\"\n\ntag side-bar\n\tdef render\n\t\t<self>\n\t\t\tfor link in routes\n\t\t\t\t<a route-to=link.url> link.name\n\ntag app-root\n\tcss & bg:cooler0 d:block\n\t\tofx:hidden\n\tdef toggleNavBar\n\t\tnavBarActive = !navBarActive\n\tdef render\n\t\t<self>\n\t\t\t<offset-nav-wrapper>\n\t\t\t\t<side-bar slot=\"navbar\">\n\t\t\t\t<main slot=\"content\">\n\t\t\t\t\t<page-home route=\"/home\">\n\t\t\t\t\t<page-tawaffa route=\"/tawaffa\">\n\t\t\t\t\t<page-404 route=\"/404\">\n\t\t\t\t\t<footer>\n\t\t\t\t\t\t<h1[ta:center py:4]> \"Vida Apps\"\n\t\t\t\nimba.mount <app-root>\n\n# Tawaffa instances: https://ahmadianswers.com/jesus/misquotehadith/tawaffa/"],
  "mappings": "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",
  "names": []
}
